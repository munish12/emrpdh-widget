"use strict";(self.webpackChunkerp_product_hub=self.webpackChunkerp_product_hub||[]).push([[924],{75924:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var l=n(93274),i=n(72791),d=n(94294),a=n(56294),r=(n(18214),n(66934)),s=n(16029),o=n(61889),c=n(5574),u=n(65661),m=n(39157),h=n(51691),x=n(97123),v=n(13239),p=n(10778),g=n(54357),j=n(40077),f=n(80184);const Z=(0,r.ZP)("div")((e=>{let{theme:t}=e;return{margin:"30px",[t.breakpoints.down("sm")]:{margin:"16px"},"& .breadcrumb":{marginBottom:"30px",[t.breakpoints.down("sm")]:{marginBottom:"16px"}}}})),b=()=>{const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)([]),[b,y]=(0,i.useState)(!0),[S,k]=(0,i.useState)([]),[w,C]=(0,i.useState)({}),[P,F]=(0,i.useState)(!1),R=new g.u,[D,N]=(0,i.useState)(!1),[A,I]=(0,i.useState)(!1),[M,_]=(0,i.useState)(null),B=(0,i.useRef)(null),E=B&&B.current&&B.current.dataMap?B.current.dataMap:null,T=[{name:"fileName",header:"File Name",defaultFlex:1.5,defaultWidth:20,render:e=>{let{data:t}=e;return(0,f.jsx)("div",{children:null===t||void 0===t?void 0:t.fileName})}},{name:"createdDate",header:"Created Date",defaultFlex:1.5,defaultWidth:200,render:e=>{let{data:t}=e;return(0,f.jsx)("div",{children:null===t||void 0===t?void 0:t.createdDate})}}],O=(0,i.useCallback)((e=>{let{selected:t}=e;C(t)}),[]);(0,i.useEffect)((()=>{const e=!0===w?E:w,t=e&&Object.keys(e).map((t=>e[t]));k(t)}),[w,E]);(0,i.useEffect)((()=>{y(!0),R.getMyReport().then((e=>{Array.isArray(null===e||void 0===e?void 0:e.data)&&(t(null===e||void 0===e?void 0:e.data),r(null===e||void 0===e?void 0:e.data)),y(!1)}))}),[D]),(0,i.useEffect)((()=>{r(e)}),[e]);return(0,f.jsxs)(Z,{children:[(0,f.jsx)(s.Z,{className:"breadcrumb",children:(0,f.jsx)(l.aG,{routeSegments:[{name:"My Report"}]})}),(0,f.jsx)(l.sF,{children:(0,f.jsxs)(o.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,f.jsx)(o.ZP,{item:!0,md:12,sm:12,xs:12,className:"font-medium",alignItems:"right",children:(0,f.jsxs)(o.ZP,{container:!0,spacing:1,alignItems:"right",children:[(0,f.jsx)(o.ZP,{item:!0,md:6,sm:6,xs:12,className:"font-medium",children:(0,f.jsx)(d.Z,{variant:"contained",onClick:()=>{N(!D)},children:"Refresh"})}),(0,f.jsx)(o.ZP,{item:!0,md:6,sm:6,xs:12,className:"font-medium",children:(0,f.jsx)(o.ZP,{container:!0,alignItems:"center",style:{textAlign:"right"},children:(0,f.jsxs)(o.ZP,{item:!0,md:12,sm:12,xs:12,className:"font-medium",style:{paddingRight:"10px"},children:[(0,f.jsx)(d.Z,{variant:"contained",disabled:1!==(null===S||void 0===S?void 0:S.length),onClick:()=>{var e;window.open(`${j.Fv}/${null===(e=S[0])||void 0===e?void 0:e.filePath}`)},style:{margin:"0 0px 0 10px"},children:"Download"}),(0,f.jsx)(d.Z,{variant:"contained",disabled:0===(null===S||void 0===S?void 0:S.length),onClick:()=>{F(!0)},style:{margin:"0 0px 0 10px"},children:"Delete"})]})})})]})}),(0,f.jsxs)(s.Z,{width:"100%",overflow:"auto",marginTop:"10px",children:[b&&(0,f.jsx)(s.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,f.jsx)(v.Z,{})}),!b&&(0,f.jsx)(a.ZP,{idProperty:"id",showZebraRows:!1,style:{minHeight:550},columns:T,dataSource:n,checkboxColumn:!0,selected:w,defaultLimit:100,sortable:!1,onSelectionChange:O,handle:e=>B.current=e?null===e||void 0===e?void 0:e.current:null,pagination:!0,renderScroller:()=>{var e,t;return null===B||void 0===B||null===(e=B.current)||void 0===e?void 0:e.setScrollTop(0==(null===S||void 0===S?void 0:S.length)?0:null===B||void 0===B||null===(t=B.current)||void 0===t?void 0:t.getScrollTop())}})]})]})}),M?(0,f.jsx)(p.Z,{openAlert:A,openDesc:M,setOpenAlert:I}):(0,f.jsx)(f.Fragment,{}),(0,f.jsxs)(c.Z,{open:P,children:[(0,f.jsx)(u.Z,{style:{cursor:"move"},id:"draggable-dialog-title",children:"Delete Mass Update Report"}),(0,f.jsx)(m.Z,{children:(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(h.Z,{children:"Do you want to delete the seleted Report(s)?"})})}),(0,f.jsxs)(x.Z,{children:[(0,f.jsx)(d.Z,{autoFocus:!0,onClick:()=>{F(!1)},children:"Cancel"}),(0,f.jsx)(d.Z,{onClick:async()=>{try{const e=null===S||void 0===S?void 0:S.map((e=>null===e||void 0===e?void 0:e.filePath));await R.deleteReport(e).then((e=>{I(!0),_({severity:null===e||void 0===e?void 0:e.status,desc:null===e||void 0===e?void 0:e.msg}),C({}),k([]),F(!1)}))}catch(e){console.error("Failed to delete BU:",e),F(!1)}N(!D)},children:"delete"})]})]})]})}}}]);
//# sourceMappingURL=924.6ce649cc.chunk.js.map