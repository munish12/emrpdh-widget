"use strict";(self.webpackChunkerp_product_hub=self.webpackChunkerp_product_hub||[]).push([[912],{23888:(e,l,i)=>{i.d(l,{m4:()=>p,pJ:()=>f});var o=i(19410),t=i(6394),n=i(71865),a=i(34929);const d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object.keys(e).includes(l.name)?e[l.name][0]:{}},v=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null===e||void 0===e?void 0:e.find((e=>(null===e||void 0===e?void 0:e.businessUnit)===l))},s=function(){var e,l;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=o.y.getState(),n=(null===t||void 0===t||null===(e=t.mcoDetails)||void 0===e?void 0:e.mrDetails)||[],a=null!==(l=Object.keys(null===n||void 0===n?void 0:n.getHighestSeqCurrentPendingOrActiveMR))&&void 0!==l&&l.includes(i)?null===n||void 0===n?void 0:n.getHighestSeqCurrentPendingOrActiveMR[i]:[];return a.forEach((e=>{e.plantName=e.partAndPlant.split("_")[1]})),a||[]},u=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.filter((e=>{var i,o;return"orgallowedvalues"===e.MappingType&&e.BUID===l&&"N"===(null===e||void 0===e||null===(i=e.details)||void 0===i||null===(o=i.EBOM_Allowed)||void 0===o?void 0:o.toUpperCase())})).map((e=>{var l;return null===e||void 0===e||null===(l=e.details)||void 0===l?void 0:l.ALLOWABLE_ORG_TEMPLATES}))||[]},r=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const l=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").find((l=>{var i;return"buplantmapping"===l.MappingType&&l.BUID===e&&"NONE OR PO ORG"===(null===l||void 0===l||null===(i=l.details)||void 0===i?void 0:i.Entity.toUpperCase())}));if(l&&Object.keys(l).length){var i;const e=null===(i=l.details)||void 0===i?void 0:i.PLANT;return Object.keys(e).forEach((l=>{"None"!==e[l]&&""!==e[l]||delete e[l]})),e}return{}},c=e=>{var l;const i=new Map;let o="";return null===(l=Object.keys(e))||void 0===l||l.map((l=>{if(o=e[l],i.has(o)){const e=i.get(o);i.set(o,[...e,l])}else i.set(o,[l])})),i},p=function(){var e,l,i,o;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0,d=null===t||void 0===t?void 0:t.find((e=>{var l;return"buplantmapping"===e.MappingType&&e.BUID===n&&"RDO OU ORG SET"===(null===e||void 0===e||null===(l=e.details)||void 0===l?void 0:l.Entity.toUpperCase())}));d=d&&Object.keys(d).length?null===(e=d)||void 0===e||null===(l=e.details)||void 0===l?void 0:l.PLANT:{};let v=null===t||void 0===t?void 0:t.find((e=>{var l;return"buplantmapping"===e.MappingType&&e.BUID===n&&"PLANTGROUP"===(null===e||void 0===e||null===(l=e.details)||void 0===l?void 0:l.Entity.toUpperCase())}));v=v&&Object.keys(v).length?null===(i=v)||void 0===i||null===(o=i.details)||void 0===o?void 0:o.PLANT:{};const s=c(v);let u=[];return s.forEach(((e,l)=>{const i=null===e||void 0===e?void 0:e.filter((e=>d&&d[e]&&"yes"===d[e].toLowerCase()));if(null!==i&&void 0!==i&&i.includes(a))return u=i,u})),u},m=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",t=[];const n=e.filter((e=>{var o,t;return"orgallowedvalues"===e.MappingType&&e.BUID===l&&Object.keys(null===e||void 0===e||null===(o=e.details)||void 0===o?void 0:o.Plants).includes(i.toUpperCase())&&"Y"===(null===e||void 0===e||null===(t=e.details)||void 0===t?void 0:t.Plants[i.toUpperCase()])}))||[],a=e.filter((e=>"parttypetotemplate"===e.MappingType&&e.BUID===l))||[],d=a.filter((e=>e.details.ENGG_ITEM_TYPE===o))||[];let v=[];if(d.length)n.forEach((e=>{var l,i;((null===(l=d[0])||void 0===l||null===(i=l.details)||void 0===i?void 0:i.allowableOrgTemplates.filter((l=>{var i;return l.org_allowed_template===(null===e||void 0===e||null===(i=e.details)||void 0===i?void 0:i.ALLOWABLE_ORG_TEMPLATES)})))||[]).length&&v.push(e)}));else{var s,u;const e=null===a||void 0===a||null===(s=a.map((e=>{var l;return null===(l=e.details)||void 0===l?void 0:l.allowableOrgTemplates})))||void 0===s?void 0:s.flat(),l=null===e||void 0===e||null===(u=e.filter((e=>{var l;return"yes"===(null===(l=e.exclusive_use)||void 0===l?void 0:l.toLowerCase())})))||void 0===u?void 0:u.map((e=>e.org_allowed_template));v=null===n||void 0===n?void 0:n.filter((e=>{var i;return!(null!==l&&void 0!==l&&l.includes(null===e||void 0===e||null===(i=e.details)||void 0===i?void 0:i.ALLOWABLE_ORG_TEMPLATES))}))}var r;v.length&&(t=null===(r=v)||void 0===r?void 0:r.map((e=>{var l;return null===e||void 0===e||null===(l=e.details)||void 0===l?void 0:l.ALLOWABLE_ORG_TEMPLATES})));return t},g=e=>{let{templateMappingsInfo:l,businessUnit:i="",plant:o="",templateName:t=""}=e,n=[];const a=l.filter((e=>{var l;return"mvoTemplateCompatibility"===e.MappingType&&e.BUID===i&&(null===e||void 0===e||null===(l=e.details)||void 0===l?void 0:l.MVO_TEMPLATE_OPTION)===t}))||[];var d,v,s,u;a.length&&(n=(null===(d=a[0])||void 0===d||null===(v=d.details)||void 0===v||null===(s=v.allowableOrgTemplates)||void 0===s||null===(u=s.filter((e=>{var l;return"active"===(null===(l=e.status)||void 0===l?void 0:l.toLowerCase())})))||void 0===u?void 0:u.map((e=>e.ALLOWABLE_ORG_TEMPLATE)))||[]);return n},f=async e=>{const l=o.y.getState(),i=(l.mcoDetails.templates,l.mcoDetails.ORGAllowedTemplateMappings||[]),f=l.mcoDetails.templateMappingsInfo||[],h=l.mcoDetails.businessUnitList||[],O=l.mcoDetails.mrDetails||[];let P=[];const M=await(async e=>{let l={},i={};null===e||void 0===e||e.mcoaffectedItem.forEach((o=>{var t,n;let a=[];null===o||void 0===o||null===(t=o.childInfo)||void 0===t||t.forEach((l=>{var i,o;const t=l.split("|");a.push({partAndPlant:`${t[1]}_${null===e||void 0===e||null===(i=e.mcoPropeties)||void 0===i?void 0:i.plantName}`,plantName:`${null===e||void 0===e||null===(o=e.mcoPropeties)||void 0===o?void 0:o.plantName}`,partName:`${t[1]}`,partId:`${t[3]}`,revision:`${t[2]}`})})),l[null===o||void 0===o?void 0:o.name]=a;let d=[];null===o||void 0===o||null===(n=o.whereUsedInfo)||void 0===n||n.forEach((l=>{var i,o;const t=l.split("|");d.push({partAndPlant:`${t[1]}_${null===e||void 0===e||null===(i=e.mcoPropeties)||void 0===i?void 0:i.plantName}`,plantName:`${null===e||void 0===e||null===(o=e.mcoPropeties)||void 0===o?void 0:o.plantName}`,partName:`${t[1]}`,partId:`${t[3]}`,revision:`${t[2]}`})})),i[null===o||void 0===o?void 0:o.name]=d}));const o=new t.h;let n=localStorage.getItem("instance");return await o.getChildPartDetails({childParts:l,whereUsedInParts:i,instance:n})})(e);return null===e||void 0===e||e.mcoaffectedItem.forEach((l=>{var o,t,y;let E=[];const T=v(h[null===e||void 0===e||null===(o=e.mcoPropeties)||void 0===o?void 0:o.name],null===l||void 0===l?void 0:l.organization),w=e.mcoPropeties,N=null===w||void 0===w?void 0:w.plantName,I=null===l||void 0===l?void 0:l.displayType,b=d(null===O||void 0===O?void 0:O.activeMR,l)||{},A=d(null===O||void 0===O?void 0:O.previousSeqMR,l)||{},R=d(null===O||void 0===O?void 0:O.getHighestSeqCurrentOrActiveMR,l)||{};let D=null;Object.keys(null===M||void 0===M?void 0:M.whereUsedInParts).includes(null===l||void 0===l?void 0:l.name)&&(D=((e,l)=>(null===e||void 0===e?void 0:e.filter((e=>{var i;return"make"===(null===e||void 0===e||null===(i=e.makeOrBuy)||void 0===i?void 0:i.toLowerCase())&&(null===e||void 0===e?void 0:e.plantName)===l})))||[])(null===M||void 0===M?void 0:M.whereUsedInParts[null===l||void 0===l?void 0:l.name],N));let S=!1;"active"===(null===b||void 0===b||null===(t=b.ERPStatus)||void 0===t?void 0:t.toLowerCase())&&(S=!0);let C="";if(void 0===b.template||""===b.template){var L;const i=n.messages.validationMessages.TEMPLATE_UNASSIGN,o=[I,null===l||void 0===l?void 0:l.name],t=(0,a.wv)(i,o);E.push(`${t} ${null===e||void 0===e||null===(L=e.mcoPropeties)||void 0===L?void 0:L.plantName}`)}if(1===Number(null===b||void 0===b?void 0:b.sequence)&&Object.keys(A).length&&(b.sequence=(null===A||void 0===A?void 0:A.sequence)+1),b.sequence>1&&(null===b||void 0===b?void 0:b.template)!==(null===A||void 0===A?void 0:A.template)||!(b.sequence>1)){var _,U,$;const i=/^\d{2}$/,o=null===l||void 0===l||null===(_=l.revision)||void 0===_?void 0:_.match(i),t=v(h[null===e||void 0===e||null===(U=e.mcoPropeties)||void 0===U?void 0:U.name],null===l||void 0===l?void 0:l.organization);if((null===t||void 0===t||null===($=t.oracleExisting)||void 0===$?void 0:$.some((e=>e===b.template)))&&o){var k;const i=n.messages.validationMessages.REV_NOT_COMPATIBLE_WITH_ORACLE_EXISTING,o=[I,null===l||void 0===l?void 0:l.name],t=(0,a.wv)(i,o);E.push(`${t} ${null===e||void 0===e||null===(k=e.mcoPropeties)||void 0===k?void 0:k.plantName}`)}}if(b.sequence>1){var B,V,j,q,x;if((null===b||void 0===b?void 0:b.template)!==(null===A||void 0===A?void 0:A.template)&&"inactive"===(null===b||void 0===b||null===(B=b.ERPStatus)||void 0===B?void 0:B.toLowerCase())){var G;const i=n.messages.validationMessages.CHANGE_ORACLE_TEMPLATE_ON_INACTIVE,o=[I,null===l||void 0===l?void 0:l.name],t=(0,a.wv)(i,o);E.push(`${t} ${null===e||void 0===e||null===(G=e.mcoPropeties)||void 0===G?void 0:G.plantName}`)}if("active"===(null===A||void 0===A||null===(V=A.ERPStatus)||void 0===V?void 0:V.toLowerCase())&&"inactive"===(null===b||void 0===b||null===(j=b.ERPStatus)||void 0===j?void 0:j.toLowerCase()))if((null===l||void 0===l||null===(q=l.whereUsedInfo)||void 0===q?void 0:q.length)>0&&(null===(x=D)||void 0===x?void 0:x.length)>0){const e=D.map((e=>e.partName)).join(","),i=n.messages.validationMessages.MBOM_STILL_USED_ON,o=[I,null===l||void 0===l?void 0:l.name],t=(0,a.wv)(i,o);E.push(`${t} \n ${N} : ${e}`)}}if("active"===(null===b||void 0===b||null===(y=b.ERPStatus)||void 0===y?void 0:y.toLowerCase())&&(b.sequence>1&&(null===b||void 0===b?void 0:b.template)!==(null===A||void 0===A?void 0:A.template)||!(b.sequence>1))){var z,H;const e=null===i||void 0===i?void 0:i.filter((e=>{var l;return"N"===(null===e||void 0===e||null===(l=e.details)||void 0===l?void 0:l.On_MBOM)}));if((null===e||void 0===e?void 0:e.find((e=>{var l;return(null===e||void 0===e||null===(l=e.details)||void 0===l?void 0:l.ALLOWABLE_ORG_TEMPLATES)===(null===b||void 0===b?void 0:b.template)})))&&(null===l||void 0===l||null===(z=l.whereUsedInfo)||void 0===z?void 0:z.length)>0&&(null===(H=D)||void 0===H?void 0:H.length)>0){const e=D.map((e=>e.partName)).join(","),i=n.messages.validationMessages.MBOM_STILL_USED_ON,o=[I,null===l||void 0===l?void 0:l.name],t=(0,a.wv)(i,o);E.push(`${t} \n ${N} : ${e}`)}var W,F,X;if("make"===(null===b||void 0===b?void 0:b.makeOrBuy))if(null!==l&&void 0!==l&&null!==(W=l.childInfo)&&void 0!==W&&W.length||null!==T&&void 0!==T&&null!==(F=T.makeWithoutBOMList)&&void 0!==F&&F.includes(null===b||void 0===b?void 0:b.template))null!==l&&void 0!==l&&null!==(X=l.childInfo)&&void 0!==X&&X.length&&(E=((e,l,i,o,t)=>{i.length||o.push(`${e.name} - highest child template not exist in MR details table. throw error`);const d=[],v=[];if(null===e||void 0===e||e.childInfo.forEach((e=>{const o=e.split("|")[1],n=i.find((e=>null===e||void 0===e?void 0:e.partName.includes(o)));n&&(!n||n.template&&"Unassigned"!==n.template)?l.map((e=>{var l;return null===(l=e.details)||void 0===l?void 0:l.ALLOWABLE_ORG_TEMPLATES})).includes(null===n||void 0===n?void 0:n.template)&&v.push(`${o} : ${t}`):d.push(`${o} : ${t}`)})),null!==d&&void 0!==d&&d.length){var s;const l=null===d||void 0===d?void 0:d.join("\n"),i=null===n||void 0===n||null===(s=n.messages)||void 0===s?void 0:s.validationMessages.CHILD_PART_MR_NOT_ASSIGNED,t=[null===e||void 0===e?void 0:e.name,l],v=(0,a.wv)(i,t);o.push(v)}if(null!==v&&void 0!==v&&v.length){var u,r;const l=v.join("\n"),i=null===n||void 0===n||null===(u=n.messages)||void 0===u||null===(r=u.validationMessages)||void 0===r?void 0:r.NotAllowedOnMBOMChildren,t=[null===e||void 0===e?void 0:e.displayType,null===e||void 0===e?void 0:e.name,l],d=(0,a.wv)(i,t);o.push(d)}return o})(l,e,null===M||void 0===M?void 0:M.childParts[null===l||void 0===l?void 0:l.name],E,N));else{const e=n.messages.validationMessages.HAS_MBOM_WITH_NO_CHILDREN,i=[I,null===l||void 0===l?void 0:l.name,N],o=(0,a.wv)(e,i);E.push(o)}}if(E.length)return void(P=[...P,...E]);var Y;if("MVO"===N)if("active"===(null===b||void 0===b||null===(Y=b.ERPStatus)||void 0===Y?void 0:Y.toLowerCase())){if(b.sequence>1&&(null===b||void 0===b?void 0:b.template)!==(null===A||void 0===A?void 0:A.template)||!(b.sequence>1)){const e=m(f,w.businessUnit,N,null===l||void 0===l?void 0:l.displayType);if(null!==e&&void 0!==e&&e.includes(null===b||void 0===b?void 0:b.template)){let e=!0;if(b.sequence>1){const i=(e=>{let{templateMappingsInfo:l,businessUnit:i="",plant:o="",prevTemplateName:t=""}=e,n=[];const a=l.filter((e=>{var l;return"mvoallowedchanges"===e.MappingType&&e.BUID===i&&(null===e||void 0===e||null===(l=e.details)||void 0===l?void 0:l.MVO_TEMPLATE_FROM)===t}))||[];var d,v,s;return a.length&&(n=(null===(d=a[0])||void 0===d||null===(v=d.details)||void 0===v||null===(s=v.MVO_TEMPLATES_TO)||void 0===s?void 0:s.map((e=>e.MVO_TEMPLATE_TO)))||[]),n})({templateMappingsInfo:f,businessUnit:w.businessUnit,plant:"MVO",prevTemplateName:null===A||void 0===A?void 0:A.template});if(!i.includes(null===b||void 0===b?void 0:b.template)&&(null===b||void 0===b?void 0:b.template)!==(null===A||void 0===A?void 0:A.template)){e=!1;const i=n.messages.validationMessages.FromToNotAllowed,o=[I,null===l||void 0===l?void 0:l.name,N,null===b||void 0===b?void 0:b.template,null===A||void 0===A?void 0:A.template],t=(0,a.wv)(i,o);E.push(t)}}if(e){const e=g({templateMappingsInfo:f,businessUnit:w.businessUnit,plant:"",templateName:null===b||void 0===b?void 0:b.template}),i=null===b||void 0===b?void 0:b.template;let o=!0;if(s(l.name).forEach((t=>{if("MVO"!==t.plantName&&t.template&&"Unassigned"!==t.template&&!e.includes(t.template)){o=!1;const e=n.messages.validationMessages.NotCompatible,d=[I,null===l||void 0===l?void 0:l.name,t.template,N,i],v=(0,a.wv)(e,d);E.push(v)}})),o){if(u(f,w.businessUnit).includes(null===b||void 0===b?void 0:b.template)&&l.childInfo.length>0){const e=n.messages.validationMessages.NotAllowedToHaveEBOM,o=[I,null===l||void 0===l?void 0:l.name,i],t=(0,a.wv)(e,o);E.push(t)}}}}else{const e=n.messages.validationMessages.NotAllowedMVO,i=[I,null===l||void 0===l?void 0:l.name,null===b||void 0===b?void 0:b.template],o=(0,a.wv)(e,i);E.push(o)}}}else{const e=[];s(l.name).forEach((l=>{"MVO"!==l.plantName&&e.push(l.plantName)}));const i=n.messages.validationMessages.StillActiveInOtherPlants,o=[I,null===l||void 0===l?void 0:l.name],t=(0,a.wv)(i,o);E.push(`${t} ${e.join(",")}`)}else if(C=null===R||void 0===R?void 0:R.template,S&&!C){const e=n.messages.validationMessages.MVOMRNotCurrentOrOnThisECOMessage,i=[I,null===l||void 0===l?void 0:l.name],o=(0,a.wv)(e,i);E.push(o)}if(E.length)return void(P=[...P,...E]);const J=s(l.name);if(J&&J.length>0){var K;let i=[],o="";const t=null===b||void 0===b?void 0:b.template,d=Number(b.sequence);if(S&&(o=g({templateMappingsInfo:f,businessUnit:w.businessUnit,plant:"",templateName:C})),"MVO"!==N&&"active"===(null===b||void 0===b||null===(K=b.ERPStatus)||void 0===K?void 0:K.toLowerCase())&&(b.sequence>1&&(null===b||void 0===b?void 0:b.template)!==(null===A||void 0===A?void 0:A.template)||!(b.sequence>1))){var Q;const s=null===b||void 0===b?void 0:b.makeOrBuy,u=v(h[null===e||void 0===e||null===(Q=e.mcoPropeties)||void 0===Q?void 0:Q.name],null===l||void 0===l?void 0:l.organization),p=null===u||void 0===u?void 0:u.plants.find((e=>(null===e||void 0===e?void 0:e.plantName)===N));if("make"===s.toLowerCase()&&!p){const e=n.messages.validationMessages.MakeInNonRDOPlant,i=[I,null===l||void 0===l?void 0:l.name,N],o=(0,a.wv)(e,i);E.push(o)}const g=m(f,w.businessUnit,N,null===l||void 0===l?void 0:l.displayType);i=o.filter((e=>g.includes(e)));const O=r(f,w.businessUnit),P=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").filter((l=>{var i,o;return"orgallowedvalues"===l.MappingType&&l.BUID===e&&"Y"===(null===l||void 0===l||null===(i=l.details)||void 0===i||null===(o=i.PO_Org_Exist_Check)||void 0===o?void 0:o.toUpperCase())}))||[]}(f,w.businessUnit).map((e=>{var l;return null===e||void 0===e||null===(l=e.details)||void 0===l?void 0:l.ALLOWABLE_ORG_TEMPLATES})),M=function(){let e=r(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],arguments.length>1&&void 0!==arguments[1]?arguments[1]:"");return c(e)}(f,w.businessUnit);if(M.has(N)){let s=!1;if(1===d){var Z,ee;if(i&&t&&!i.includes(t)){const e=n.messages.validationMessages.NotCompatibleOrAllowed,i=[I,null===l||void 0===l?void 0:l.name,t,N,C],o=(0,a.wv)(e,i);E.push(o)}const o=v(h[null===e||void 0===e||null===(Z=e.mcoPropeties)||void 0===Z?void 0:Z.name],null===l||void 0===l?void 0:l.organization);if(!(null===o||void 0===o||null===(ee=o.oracleExisting)||void 0===ee?void 0:ee.some((e=>e===t)))){const e=M.get(N);if(null===e||void 0===e||e.forEach((e=>{J.find((l=>e===l.partAndPlant.split("_")[1]))&&(s=!0)})),!s){const i=e.join(" or "),o=n.messages.validationMessages.NotAssignedToPrimaryPlant,t=[I,null===l||void 0===l?void 0:l.name,N,i],d=(0,a.wv)(o,t);E.push(d)}}}else if(d>1&&o&&t&&!o.includes(t)){const e=n.messages.validationMessages.NotCompatible,i=[I,null===l||void 0===l?void 0:l.name,t,N,C],o=(0,a.wv)(e,i);E.push(o)}}else{if(i&&t&&!i.includes(t)){const e=n.messages.validationMessages.NotCompatibleOrAllowed,i=[I,null===l||void 0===l?void 0:l.name,t,N,C],o=(0,a.wv)(e,i);E.push(o)}if(Object.keys(O).includes(N)&&t&&P.includes(t)){const e=O[N];if("None"!==e){if(!J.find((l=>e===l.partAndPlant.split("_")[1]))){const i=n.messages.validationMessages.NotAssignedToPurchaseValidationPlant,o=[I,null===l||void 0===l?void 0:l.name,N,t,e],d=(0,a.wv)(i,o);E.push(d)}}}}}if(E.length)return void(P=[...P,...E]);if("MVO"!==N){const e=l.organization,i=N,o=t,d=p(f,e,N);if(null!==d&&void 0!==d&&d.includes(i)){var le;let t=[],v=[];if(null===d||void 0===d||d.forEach((l=>{if(l!==i){const i=J.find((e=>l===e.partAndPlant.split("_")[1]));if(i){const l=i.template;v=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",l=arguments.length>2?arguments[2]:void 0,i=[];const o=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").filter((i=>{var o;return"setcompatibletemplates"===i.MappingType&&i.BUID===e&&(null===i||void 0===i||null===(o=i.details)||void 0===o?void 0:o.TEMPLATE_ORG_EXISTING)===l}))||[];var t,n,a;return o.length&&(i=null===(t=o[0])||void 0===t||null===(n=t.details)||void 0===n||null===(a=n.TEMPLATE_ORG_MODIFYING)||void 0===a?void 0:a.map((e=>e.TEMPLATE_ORG_MODIFYING))),i}(f,e,l),v&&t.push(v)}}})),t=t.flat(),null!==(le=t)&&void 0!==le&&le.length&&!t.includes(o)){const e=n.messages.validationMessages.NonMVONotCompatible,i=[I,null===l||void 0===l?void 0:l.name],o=(0,a.wv)(e,i);E.push(`${o} \n ${d.join("\n")}`)}}}}if(J&&J.length>0&&(b.sequence>1&&(null===b||void 0===b?void 0:b.template)!==(null===A||void 0===A?void 0:A.template)||!(b.sequence>1))){if(u(f,w.businessUnit).includes(null===b||void 0===b?void 0:b.template)&&l.childInfo.length>0){const e=n.messages.validationMessages.NotAllowedToHaveEBOM,i=[I,null===l||void 0===l?void 0:l.name,C],o=(0,a.wv)(e,i);E.push(o)}}E.length&&(P=[...P,...E])})),P.length?{valid:!1,errDesc:P}:{valid:!0,errDesc:""}}},57289:(e,l,i)=>{i.d(l,{BS:()=>C,CR:()=>S,IT:()=>r,PB:()=>h,TB:()=>I,WO:()=>b,X8:()=>M,XA:()=>f,ak:()=>E,nQ:()=>c,oJ:()=>A,qS:()=>D,qe:()=>p,rA:()=>N,sx:()=>P,t6:()=>y,uX:()=>T,uj:()=>w,ul:()=>R});var o=i(19410),t=(i(97892),i(6429),i(6394)),n=i(56421),a=i(80245),d=(i(23888),i(13286)),v=i(71865),s=i(34929);const u=localStorage.getItem("instance"),r=()=>{const e=new t.h;return e.getRSMEList().then((e=>e.map((e=>{const l=e.split("|");return{label:`${l[1]}(${l[0]})`,key:l[0],id:l[2],email:l[3]}})))).then((l=>e.getRMEList().then((e=>{const i=e.map((e=>{const l=e.split("|");return{label:`${l[1]}(${l[0]})`,key:l[0],id:l[2],email:l[3]}}));return{rsmeList:l,rmeList:i}})))).then((e=>{let{rsmeList:l,rmeList:i}=e;o.y.dispatch((0,a.$V)({RSMEList:l,RMEList:i}))})).catch((e=>{throw o.y.dispatch((0,a.$V)({isPageHavingIssue:!0})),e}))},c=(e,l)=>{let i={...e.mcoPropeties};const o=l;var t,n,a,d,v,s;!i||null!==(null===i||void 0===i?void 0:i.startdate)&&""!==(null===i||void 0===i?void 0:i.startdate)&&"Unassigned"!==(null===i||void 0===i?void 0:i.startdate)||(i.startdate=null!==o&&void 0!==o&&null!==(t=o.mcoProperties)&&void 0!==t&&t.startdate?null===o||void 0===o||null===(n=o.mcoProperties)||void 0===n?void 0:n.startdate:null);!i||null!==(null===i||void 0===i?void 0:i.rme)&&""!==(null===i||void 0===i?void 0:i.rme)&&"Unassigned"!==(null===i||void 0===i?void 0:i.rme)||(i.rme=null!==o&&void 0!==o&&null!==(a=o.mcoProperties)&&void 0!==a&&a.rme?null===o||void 0===o||null===(d=o.mcoProperties)||void 0===d?void 0:d.rme:null);!i||null!==(null===i||void 0===i?void 0:i.rsme)&&""!==(null===i||void 0===i?void 0:i.rsme)&&"Unassigned"!==(null===i||void 0===i?void 0:i.rsme)||(i.rsme=null!==o&&void 0!==o&&null!==(v=o.mcoProperties)&&void 0!==v&&v.rsme?null===o||void 0===o||null===(s=o.mcoProperties)||void 0===s?void 0:s.rsme:null);return i},p=async e=>{try{var l;const i=o.y.getState(),n=i.mcoDetails.plants||[],a=i.mcoDetails.source||[],d=i.mcoDetails.templates||[],v=m(e,n,a),s=new t.h;let u=await s.getItemDetailsByMcoId(null===e||void 0===e||null===(l=e.mcoPropeties)||void 0===l?void 0:l.id);const r=await T();let c=null===u||void 0===u?void 0:u.affectedItems.map((l=>{const i=r.filter((e=>(null===l||void 0===l?void 0:l.id)===e.id));let o=null;var t;i.length&&null!==i[0].materialType&&(o={name:i[0].materialType.name,attributes:{...i[0].materialType.attributeMap,"Sales Org":null===v||void 0===v||null===(t=v.plantInfo)||void 0===t?void 0:t.SalesOrg}},"N"===(null===e||void 0===e?void 0:e.isMaster)&&delete o.attributes["Copy From"]);l.materialType=o;const n=(null===d||void 0===d?void 0:d.find((e=>{var i;return(null===e||void 0===e?void 0:e.templateName)===(null===(i=l.materialType)||void 0===i?void 0:i.name)})))||{};return n.attributes&&n.attributes.forEach((e=>{var i;const o=e.name,t=l[o],n=null===(i=l.attributeGroupData)||void 0===i?void 0:i[o],a=Object.keys(e.values[0]).find((l=>e.values[0][l]===t)),d=Object.keys(e.values[0]).find((l=>e.values[0][l]===n));void 0!==t&&(l[o]=a),void 0!==n&&(l.attributeGroupData[o]=d)})),l}));return u.affectedItems=c,u.target=null===v||void 0===v?void 0:v.targetInfo,u}catch(i){return i}},m=(e,l,i)=>{var o,t,n;const a=null===e||void 0===e||null===(o=e.mcoPropeties)||void 0===o?void 0:o.organizationId,d=null===e||void 0===e||null===(t=e.source)||void 0===t?void 0:t.url,v=null===e||void 0===e||null===(n=e.mcoPropeties)||void 0===n?void 0:n.plantName;let s=[];if(a){const e=a.split(" ");if(e.length){s=(null===i||void 0===i?void 0:i.filter((l=>"ORACLE"===e[0]||l.ERPType===e[0]&&l.instance===e[1]&&d===(null===l||void 0===l?void 0:l.source))))||[]}}return g(v,l,s)},g=(e,l,i)=>{let o=null,t=null;if(i.length&&(i=i[0],o=(null===l||void 0===l?void 0:l.filter((l=>{var o,t,n;return l.ERPType===(null===(o=i)||void 0===o?void 0:o.ERPType)&&(l.instance===(null===(t=i)||void 0===t?void 0:t.environment)||l.instance===(null===(n=i)||void 0===n?void 0:n.instance))&&l.plantName===e})))||null,o)){var n,a,d,v,s,u,r,c,p,m,g,f,h,O,P;o=o[0];let e=null===(n=o)||void 0===n?void 0:n.aliasPlant;t={system:null===(a=i)||void 0===a?void 0:a.ERPType,instance:null===(d=i)||void 0===d?void 0:d.environment,businessUnit:"BU",plant:e,url:null===(v=o)||void 0===v||null===(s=v.ConnectivityDetails)||void 0===s?void 0:s.url,username:null===(u=o)||void 0===u||null===(r=u.ConnectivityDetails)||void 0===r?void 0:r.username,password:null===(c=o)||void 0===c||null===(p=c.ConnectivityDetails)||void 0===p?void 0:p.password,authkey:"",port:"",sapsysnum:null===(m=o)||void 0===m||null===(g=m.ConnectivityDetails)||void 0===g?void 0:g.sapsysnum,sapclientid:null===(f=o)||void 0===f||null===(h=f.ConnectivityDetails)||void 0===h?void 0:h.sapclientid,"BOM Usage":null!==(O=null===(P=o)||void 0===P?void 0:P.bomusage)&&void 0!==O?O:""}}return{targetInfo:t,plantInfo:o}},f=e=>{const l={},i={rme:"Responsible Manufacturing Engineer",rsme:"Responsible Senior Manufacturing Engineer",mcostate:"State",responseFromErp:"Export Status",plantName:"Plant",description:"description",startdate:"Start Date",ECOExportToERP:"ECOExportToERP"},o=["description","rme","rsme","startdate","ECOExportToERP"];for(const t in null===e||void 0===e?void 0:e.mcoPropeties)null!==e&&void 0!==e&&e.mcoPropeties.hasOwnProperty(t)&&o.includes(t)&&("startdate"===t?(l["MBOM Start Date"]=null===e||void 0===e?void 0:e.mcoPropeties[t],l["Start Date"]=null===e||void 0===e?void 0:e.mcoPropeties[t]):l[i[t]]=null!==e&&void 0!==e&&e.mcoPropeties[t]?null===e||void 0===e?void 0:e.mcoPropeties[t]:"");return null!==l&&void 0!==l&&l.hasOwnProperty("ECOExportToERP")&&(null===l||void 0===l||delete l.ECOExportToERP),l},h=e=>{const l={},i={rme:"Responsible Manufacturing Engineer",rsme:"Responsible Senior Manufacturing Engineer",mcostate:"State",responseFromErp:"Export Status",plantName:"Plant",description:"description",startdate:"Start Date"},o=["description","rme","rsme","startdate"];for(const t in e)null!==e&&void 0!==e&&e.hasOwnProperty(t)&&o.includes(t)&&("startdate"===t?(l["MBOM Start Date"]=null===e||void 0===e?void 0:e[t],l["Start Date"]=null===e||void 0===e?void 0:e[t]):l[i[t]]=null===e||void 0===e?void 0:e[t]);return l};const O=(e,l)=>{let i={};const o="Startdate",t="Responsible Manufacturing Engineer",n="Responsible Senior Manufacturing Engineer",a="Description",d="ECO Export To ERP";if(Object.keys((null===e||void 0===e?void 0:e.mcoPropeties)||{}).length){const r=null===e||void 0===e?void 0:e.mcoPropeties;if(console.log(r,"valuesvaluesvaluesvalues"),null!==r&&void 0!==r&&r.startdate){let l=new Date;l.setHours(0,0,0,0);let t=null===r||void 0===r?void 0:r.startdate.split(/[\s/:]+/),n=new Date(t[2],t[0]-1,t[1],t[3],t[4],t[5]);console.log(n,"startDate"),console.log(null===e||void 0===e?void 0:e.mcoPropeties,"responseData?.mcoPropeties"),n<l&&"Release"!==(null===e||void 0===e?void 0:e.mcoPropeties.mcostate)&&"Create"!==(null===e||void 0===e?void 0:e.mcoPropeties.mcostate)&&"Review"!==(null===e||void 0===e?void 0:e.mcoPropeties.mcostate)&&(i.startdate=`${null===r||void 0===r?void 0:r.name}: ${o} must be a present or future date`)}else i.startdate=`${null===r||void 0===r?void 0:r.name}: ${o} is required`;var v,s;if("SaaS"!==u)r.rme&&"unassigned"!==(null===(v=r.rme)||void 0===v?void 0:v.toLowerCase())||(i.rme=`${null===r||void 0===r?void 0:r.name}: ${t} is required`),r.rsme&&"unassigned"!==(null===(s=r.rsme)||void 0===s?void 0:s.toLowerCase())||(i.rsme=`${null===r||void 0===r?void 0:r.name}: ${n} is required`),r.description||(i.description=`${null===r||void 0===r?void 0:r.name}: ${a} is required`);r.ECOExportToERP||"cavalidation"===l||(i.ECOExportToERP=`${null===r||void 0===r?void 0:r.name}: ${d} is required`)}return i},P=async function(e,l){var i;let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];o.y.getState().mcoDetails.templateMappingsInfo;let n=null===l||void 0===l||null===(i=l.mcoPropeties)||void 0===i?void 0:i.organizationId;const a=O(l,e);if(Object.keys(a).length)return{valid:!1,errDesc:a};const d=[],u=l.mcoPropeties;null===u||void 0===u||u.plantName;return null===t||void 0===t||t.forEach(((l,i)=>{var o;if(("lifecycle"===e||"cavalidation"==e)&&(null===l||void 0===l||null===(o=l.materialType)||void 0===o||!o.name)){let e;var t,a;if(n.includes("SAP"))e=null===v||void 0===v||null===(t=v.messages)||void 0===t||null===(a=t.SAP)||void 0===a?void 0:a.templateUnassigned;else if(n.includes("ORACLE")){var r,c;e=null===v||void 0===v||null===(r=v.messages)||void 0===r||null===(c=r.ORACLE)||void 0===c?void 0:c.templateUnassigned}if(e){const i=[null===u||void 0===u?void 0:u.name,null===l||void 0===l?void 0:l.name],o=(0,s.wv)(e,i);d.push(o)}}})),{valid:!(null!==d&&void 0!==d&&d.length),errDesc:d}},M=async function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{var i,n,d,v,s,u;const r={plantName:null===e||void 0===e||null===(i=e.mcoPropeties)||void 0===i?void 0:i.plantName,organizationId:null===e||void 0===e||null===(n=e.mcoPropeties)||void 0===n?void 0:n.organizationId,sourceUrl:null===e||void 0===e||null===(d=e.source)||void 0===d?void 0:d.url,mcotype:(null===(v=l[0])||void 0===v?void 0:v.id)===(null===e||void 0===e||null===(s=e.mcoPropeties)||void 0===s?void 0:s.id)?"master":"child",businessUnit:null===e||void 0===e||null===(u=e.mcoPropeties)||void 0===u?void 0:u.businessUnit};console.log("source payload",r);let c=[];const p=new t.h;await p.getSourcePlantTemplate(r).then((async i=>{if(i){var t,n,d,v,s,u,r;console.log("respdata",i),console.log("resData?.mcoPropeties?.plantName",null===e||void 0===e||null===(t=e.mcoProperties)||void 0===t?void 0:t.plantName),i.plants.map((l=>{var i;null!==e&&void 0!==e&&null!==(i=e.mcoPropeties)&&void 0!==i&&i.plantName&&(e.mcoPropeties.organizationId=l.ERPType+" "+l.instance)})),console.log("resData?.mcoPropeties?.organizationId",e),c=i.templates;let E=i.templates||[];if(console.log("getMasterDatails",l),null!==(n=l[0])&&void 0!==n&&n.id&&null!==(d=l[0])&&void 0!==d&&d.id&&(null===(v=l[0])||void 0===v?void 0:v.id)!==(null===e||void 0===e||null===(s=e.mcoPropeties)||void 0===s?void 0:s.id)){var m,g,f,h,O,P,M,y;const o={plantName:null===e||void 0===e||null===(m=e.mcoaffectedItem[0])||void 0===m||null===(g=m.relatedMCOs[0])||void 0===g?void 0:g.plantName,organizationId:null===e||void 0===e||null===(f=e.mcoPropeties)||void 0===f?void 0:f.organizationId,sourceUrl:null===e||void 0===e||null===(h=e.source)||void 0===h?void 0:h.url,mcotype:(null===(O=l[0])||void 0===O?void 0:O.id)===(null===e||void 0===e||null===(P=e.mcoaffectedItem[0])||void 0===P||null===(M=P.relatedMCOs[0])||void 0===M?void 0:M.id)?"master":"child",businessUnit:null===e||void 0===e||null===(y=e.mcoPropeties)||void 0===y?void 0:y.businessUnit};console.log("mastersptPayload",o),await p.getSourcePlantTemplate(o).then((e=>{e&&(E=e.templates.concat(i.templates))}))}const T=null===i||void 0===i||null===(u=i.templateMappingsInfo)||void 0===u?void 0:u.filter((e=>"orgallowedvalues"===(null===e||void 0===e?void 0:e.MappingType))),w={source:null===i||void 0===i?void 0:i.source,businessUnitList:{[null===e||void 0===e||null===(r=e.mcoPropeties)||void 0===r?void 0:r.name]:null===i||void 0===i?void 0:i.businessUnit},plants:null===i||void 0===i?void 0:i.plants,templates:E,materialData:c,templateMappingsInfo:null===i||void 0===i?void 0:i.templateMappingsInfo,ORGAllowedTemplateMappings:T};o.y.dispatch((0,a.$V)(w))}}))}catch(r){throw r}},y=async e=>{try{await(async e=>{console.log("locresData",e);try{var l,i,n,v;let r=localStorage.getItem("instance"),c=[];var s;if(null!==e&&void 0!==e&&null!==(l=e.mcoPropeties)&&void 0!==l&&null!==(i=l.organizationId)&&void 0!==i&&i.includes("ORACLE"))c=null===e||void 0===e||null===(s=e.mcoaffectedItem)||void 0===s?void 0:s.map(((l,i)=>{var o,t,n;return{partName:null===l||void 0===l?void 0:l.name,plantName:null===e||void 0===e||null===(o=e.mcoPropeties)||void 0===o?void 0:o.plantName,businessUnit:null===l||void 0===l?void 0:l.organization,mcoId:null===e||void 0===e||null===(t=e.mcoPropeties)||void 0===t?void 0:t.id,mcoName:null===e||void 0===e||null===(n=e.mcoPropeties)||void 0===n?void 0:n.name,revision:null===l||void 0===l?void 0:l.revision,partId:null===l||void 0===l?void 0:l.id,targetPlant:"MVO",instance:r||"onPrem"}}));else if(null!==e&&void 0!==e&&null!==(n=e.mcoPropeties)&&void 0!==n&&null!==(v=n.organizationId)&&void 0!==v&&v.includes("SAP")){var u;const l=null===e||void 0===e||null===(u=e.mcoPropeties)||void 0===u?void 0:u.organizationId,i=null===d||void 0===d?void 0:d.sapPlantConfiguration,o=(null===i||void 0===i?void 0:i[l])||"MMP01";c=null===e||void 0===e?void 0:e.mcoaffectedItem.map(((l,i)=>{var t,n,a;return{partName:null===l||void 0===l?void 0:l.name,plantName:null===e||void 0===e||null===(t=e.mcoPropeties)||void 0===t?void 0:t.plantName,businessUnit:null===l||void 0===l?void 0:l.organization,mcoId:null===e||void 0===e||null===(n=e.mcoPropeties)||void 0===n?void 0:n.id,mcoName:null===e||void 0===e||null===(a=e.mcoPropeties)||void 0===a?void 0:a.name,revision:null===l||void 0===l?void 0:l.revision,partId:null===l||void 0===l?void 0:l.id,targetPlant:o,instance:r||"onPrem"}}))}const p=new t.h;console.log("getMrPayload",c);const m=await p.getMRbyPartAndPlant(c);await o.y.dispatch((0,a.$V)({mrDetails:m}))}catch(r){throw r}})(e),await(async e=>{try{const l=null===e||void 0===e?void 0:e.mcoaffectedItem.map((e=>({id:null===e||void 0===e?void 0:e.organization}))),i=new t.h;await i.getBusinessUnitbyid(l).then((async e=>{await o.y.dispatch((0,a.$V)({allPartsBusinessUnitDetails:null===e||void 0===e?void 0:e.data}))}))}catch(l){throw l}})(e),await(async e=>{try{var l;let i=localStorage.getItem("instance"),t=null===e||void 0===e||null===(l=e.mcoPropeties)||void 0===l?void 0:l.organizationId;if(!t||"string"!==typeof t)return console.error("Invalid organizationId:",t),!1;const d=t.split(" "),v=d.length?d[0]:null;if(!v)return!1;const s=[`${v}_${i||"onPrem"}`],u=new n.D;await u.getSystemSettingsbyid(s).then((e=>{"success"===(null===e||void 0===e?void 0:e.status)&&o.y.dispatch((0,a.$V)({systemSetingsDetail:null===e||void 0===e?void 0:e.data}))}))}catch(i){throw console.error("An error occurred:",i),i}})(e),await(async e=>{try{var l,i;let n=null===e||void 0===e||null===(l=e.mcoPropeties)||void 0===l?void 0:l.name,d=null===e||void 0===e||null===(i=e.mcoPropeties)||void 0===i?void 0:i.plantName,v=null===n||void 0===n?void 0:n.replace(d,"MVO");if(null!==v&&void 0!==v&&v.includes("MVO")&&(null===n||void 0===n||!n.includes("MVO"))){const e=[v],l=new t.h;await l.getMcoDetailsByName(e).then((e=>{var l,i;(null===e||void 0===e||null===(l=e[v])||void 0===l||null===(i=l.mcoProperties)||void 0===i?void 0:i.name)===v&&o.y.dispatch((0,a.$V)({parentMCODetails:null===e||void 0===e?void 0:e[v]}))}))}}catch(n){throw console.error("An error occurred:",n),n}})(e)}catch(l){throw console.error("An error occurred:",l),l}},E=async function(e,l){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{var n;const O=[{id:null===l||void 0===l||null===(n=l.mcoPropeties)||void 0===n?void 0:n.id,instance:u}],P=new t.h,M=await P.getattributesbyid(O);let y={};var d,v,s,r,c,p,m,g,f,h;if(Object.keys(null===M||void 0===M?void 0:M.data).length&&null!==M&&void 0!==M&&M.data[0]&&"saveMcoState"===i)y={id:null===l||void 0===l||null===(d=l.mcoPropeties)||void 0===d?void 0:d.id,producthub:`${null===l||void 0===l||null===(v=l.mcoPropeties)||void 0===v?void 0:v.name}_${null===l||void 0===l||null===(s=l.mcoPropeties)||void 0===s?void 0:s.plantName}`,uniquePartId:`${null===l||void 0===l||null===(r=l.mcoPropeties)||void 0===r?void 0:r.name}_${null===l||void 0===l||null===(c=l.mcoPropeties)||void 0===c?void 0:c.plantName}`,mcoProperties:e};else y={id:null===l||void 0===l||null===(p=l.mcoPropeties)||void 0===p?void 0:p.id,producthub:`${null===l||void 0===l||null===(m=l.mcoPropeties)||void 0===m?void 0:m.name}_${null===l||void 0===l||null===(g=l.mcoPropeties)||void 0===g?void 0:g.plantName}`,uniquePartId:`${null===l||void 0===l||null===(f=l.mcoPropeties)||void 0===f?void 0:f.name}_${null===l||void 0===l||null===(h=l.mcoPropeties)||void 0===h?void 0:h.plantName}`,mcoProperties:e,mcoaffectedItem:null===l||void 0===l?void 0:l.mcoaffectedItem,source:null===l||void 0===l?void 0:l.source,target:null===l||void 0===l?void 0:l.target};const E=async e=>{try{const l=Object.keys(null===M||void 0===M?void 0:M.data).length&&null!==M&&void 0!==M&&M.data[0]?P.updateattributesbyid:P.addattributes,t=await l(e);if("saveMcoState"===i&&Object.keys((null===t||void 0===t?void 0:t.data)||{}).length){const e=(null===t||void 0===t?void 0:t.data)||{};await o.y.dispatch((0,a.qH)({mcoPropeties:null===e||void 0===e?void 0:e.mcoProperties,mcoaffectedItem:null===e||void 0===e?void 0:e.mcoaffectedItem})),await b()}}catch(l){return console.log(l),{status:"failed",data:null===l||void 0===l?void 0:l.message}}};await E(y)}catch(O){return console.log(O),{status:"failed",data:null===O||void 0===O?void 0:O.message}}},T=async()=>{var e,l;const i=o.y.getState(),t=(null===i||void 0===i||null===(e=i.mcoDetails)||void 0===e?void 0:e.responseData)||{},n=(null===i||void 0===i||null===(l=i.mcoDetails)||void 0===l?void 0:l.affectedPartsData)||[];return null!==n&&void 0!==n&&n.length?n||[]:(null===t||void 0===t?void 0:t.mcoaffectedItem)||[]},w=async function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;const t=o.y.getState(),n=t.mcoDetails.templateMappingsInfo||[],d=t.mcoDetails.responseData||{},v=t.mcoDetails.materialData||[];let s=[...await T()],u=null===s||void 0===s?void 0:s.findIndex((e=>e.id===l));if("template"===i){var r,c,p;let l=(null===v||void 0===v?void 0:v.filter((l=>l.id===e)))||[];l=null!==(r=l)&&void 0!==r&&r.length?l[0]:null,s[u].materialType=l?{name:null===(c=l)||void 0===c?void 0:c.templateName}:null,s[u].isTemplateValueChange=!0;let i=null===(p=s[u])||void 0===p?void 0:p.organization,o=(null===n||void 0===n?void 0:n.find((e=>{var l,o;return"buplantmapping"===e.MappingType&&(null===(l=e.BUID)||void 0===l?void 0:l.toLowerCase())===(null===i||void 0===i?void 0:i.toLowerCase())&&"bom or no bom"===(null===e||void 0===e||null===(o=e.details)||void 0===o?void 0:o.Entity.toLowerCase())})))||{},t=(null===n||void 0===n?void 0:n.filter((e=>{var l,o,t;return"orgallowedvalues"===e.MappingType&&(null===(l=e.BUID)||void 0===l?void 0:l.toLowerCase())===(null===i||void 0===i?void 0:i.toLowerCase())&&"y"===(null===e||void 0===e||null===(o=e.details)||void 0===o||null===(t=o.Has_MBOM)||void 0===t?void 0:t.toLowerCase())})).map((e=>{var l;return null===e||void 0===e||null===(l=e.details)||void 0===l?void 0:l.ALLOWABLE_ORG_TEMPLATES})))||[],a=!1,h=!1;var m;if(Object.keys(t).length)null!==t&&void 0!==t&&t.includes(null===(m=l)||void 0===m?void 0:m.templateName)&&(h=!0);if(Object.keys(o).length){var g,f;const e=null===o||void 0===o||null===(g=o.details)||void 0===g?void 0:g.PLANT,l=Object.keys(e).filter((l=>{var i;return"no bom"===(null===(i=e[l])||void 0===i?void 0:i.toLowerCase())}));null!==l&&void 0!==l&&l.includes(null===d||void 0===d||null===(f=d.mcoPropeties)||void 0===f?void 0:f.plantName)&&(a=!0)}h&&!a?(s[u].makeOrBuy="make",s[u].isMakeOrBuyValueChange=!0):(s[u].makeOrBuy="buy",s[u].isMakeOrBuyValueChange=!0)}return"exportToERP"===i&&(s[u].exportToERP=e,s[u].isExportToERPValueChange=!0),"itemStatus"===i&&(s[u].itemStatus=e,s[u].isItemStatusValueChange=!0),"updateRowData"===i?(s[u].newRevision=null===e||void 0===e?void 0:e.newRevision,s[u].oldRevision=null===e||void 0===e?void 0:e.oldRevision,s[u].currentSequence=null===e||void 0===e?void 0:e.currentSequence,await o.y.dispatch((0,a.$V)({affectedPartsData:s}))):await o.y.dispatch((0,a.$V)({affectedPartsData:s,isMaterialFormEdited:!0})),s},N=e=>{const l=o.y.getState().mcoDetails.materialData||[];if(!e.id)return;const i=null===l||void 0===l?void 0:l.find((l=>l.id===e.id));return null!==i&&void 0!==i&&i.templateName?i.templateName:""},I=e=>{const l=o.y.getState(),i=l.mcoDetails.masterData||{},t=l.mcoDetails.materialData||[];let n={};if(i&&Object.keys(i).length&&"N"===(null===i||void 0===i?void 0:i.master)&&null!==i&&void 0!==i&&i.mcoaffectedItem){var a,d;let l=null===i||void 0===i||null===(a=i.mcoaffectedItem)||void 0===a?void 0:a.findIndex((l=>l.id===(null===e||void 0===e?void 0:e.id)));n=(null===t||void 0===t?void 0:t.filter((e=>{var o,t;return e.templateName===(null===i||void 0===i||null===(o=i.mcoaffectedItem[l])||void 0===o||null===(t=o.materialType)||void 0===t?void 0:t.name)})))||[],n=null!==(d=n)&&void 0!==d&&d.length?n[0]:{}}else if(null!==t&&void 0!==t&&t.length){var v;n=null===t||void 0===t?void 0:t.filter((l=>{var i,o;return(null===e||void 0===e?void 0:e.materialType)&&l.templateName===(null===e||void 0===e||null===(i=e.materialType)||void 0===i?void 0:i.name)||l.desc===(null===e||void 0===e||null===(o=e.attributeGroupData)||void 0===o?void 0:o.ERPItemTypeTemplate)})),n=null!==(v=n)&&void 0!==v&&v.length?n[0]:{}}return n},b=async()=>{var e;const l=o.y.getState(),i=l.mcoDetails.responseData||{},t=l.mcoDetails.materialData||[],n=l.mcoDetails.mrDetails||[],a=l.mcoDetails.eachTemplateOptions||{};let d={};if(null!==i&&void 0!==i&&null!==(e=i.mcoaffectedItem)&&void 0!==e&&e.length){var v,s;if(null!==(v=window)&&void 0!==v&&v.ExternalClass){let e={affectedItemsInfo:i};const l=new window.ExternalClass(e);d=await l.getDropdownOptions()}null===i||void 0===i||null===(s=i.mcoaffectedItem)||void 0===s||s.forEach(((e,l)=>{var i,o,v,s,u,r,c,p,m,g,f,h,O,P,M,y,E,T,N;let b=I(e,l),A=(null===a||void 0===a?void 0:a[null===e||void 0===e?void 0:e.name])||[];null!==(i=Object.keys(d))&&void 0!==i&&i.length&&null!==(o=Object.keys(d))&&void 0!==o&&o.includes(null===e||void 0===e?void 0:e.name)&&(A=d[null===e||void 0===e?void 0:e.name]);const R=(null===(v=A)||void 0===v?void 0:v.find((e=>(null===e||void 0===e?void 0:e.id)===b.id)))||{};if((null===(s=Object.keys(R))||void 0===s||!s.length)&&null!==(u=Object.keys(b))&&void 0!==u&&u.length){let e=null===t||void 0===t?void 0:t.find((e=>{var l;return(null===(l=b)||void 0===l?void 0:l.Name)===e.templateName}));e&&(A=[...A,e])}const D=null!==(r=Object.keys(n))&&void 0!==r&&r.length&&null!==n&&void 0!==n&&null!==(c=n.activeMR)&&void 0!==c&&c.hasOwnProperty(null===e||void 0===e?void 0:e.name)&&null!==n&&void 0!==n&&null!==(p=n.activeMR[null===e||void 0===e?void 0:e.name])&&void 0!==p&&p.length?null===n||void 0===n?void 0:n.activeMR[null===e||void 0===e?void 0:e.name][0]:{},S=null!==(m=Object.keys(D))&&void 0!==m&&m.length?`${null===e||void 0===e?void 0:e.revision}${null===D||void 0===D?void 0:D.additionalSequence}`:"",C=null!==(g=Object.keys(D))&&void 0!==g&&g.length?`${null===D||void 0===D?void 0:D.sequence}`:"",L=null!==(f=Object.keys(n))&&void 0!==f&&f.length&&null!==n&&void 0!==n&&null!==(h=n.activeMR)&&void 0!==h&&h.hasOwnProperty(null===e||void 0===e?void 0:e.name)&&null!==n&&void 0!==n&&null!==(O=n.previousSeqMR[null===e||void 0===e?void 0:e.name])&&void 0!==O&&O.length?null===n||void 0===n?void 0:n.previousSeqMR[null===e||void 0===e?void 0:e.name][0]:{},_=null!==(P=Object.keys(L))&&void 0!==P&&P.length?`${null===L||void 0===L?void 0:L.revision}${null===L||void 0===L?void 0:L.additionalSequence}`:"";w({newRevision:S,oldRevision:_,currentSequence:C},null===e||void 0===e?void 0:e.id,"updateRowData");const U=(null===(M=A)||void 0===M?void 0:M.find((e=>{var l;return(null===e||void 0===e?void 0:e.id)===(null===(l=b)||void 0===l?void 0:l.id)})))||{};if(null===(y=Object.keys(U))||void 0===y||!y.length){let l=null===t||void 0===t?void 0:t.find((e=>(null===D||void 0===D?void 0:D.template)===e.templateName));var $;if(l&&(null===e||void 0===e||!e.isTemplateValueChange))A=[...A,l],b=l,w(null===($=b)||void 0===$?void 0:$.templates,null===e||void 0===e?void 0:e.id,"template")}let k={};if(null!==(E=Object.keys(L||{}))&&void 0!==E&&E.length){var B;let l=(null===t||void 0===t?void 0:t.find(((e,l)=>(null===e||void 0===e?void 0:e.templateName)===(null===L||void 0===L?void 0:L.template))))||{};null!==(B=Object.keys(l))&&void 0!==B&&B.length&&(A.push(l),null!==e&&void 0!==e&&e.isTemplateValueChange||(k=l))}if((null===(T=Object.keys(b||{}))||void 0===T||!T.length)&&(null===e||void 0===e||!e.isTemplateValueChange)){var V,j,q,x;const l=(null===(V=A)||void 0===V?void 0:V.find((e=>(null===e||void 0===e?void 0:e.templateName)===(null===L||void 0===L?void 0:L.template))))||{};var G;if(null!==(j=Object.keys(l))&&void 0!==j&&j.length||null===(q=Object.keys(k))||void 0===q||!q.length){if(null!==(x=Object.keys(l))&&void 0!==x&&x.length){var z;b=l,w(null===(z=b)||void 0===z?void 0:z.templates,null===e||void 0===e?void 0:e.id,"template")}}else b=k,w(null===(G=b)||void 0===G?void 0:G.templates,null===e||void 0===e?void 0:e.id,"template")}let H=null===e||void 0===e?void 0:e.exportToERP,W=null===e||void 0===e||null===(N=e.itemStatus)||void 0===N?void 0:N.toLowerCase();var F;(H||null!==e&&void 0!==e&&e.isExportToERPValueChange||w(H,null===e||void 0===e?void 0:e.id,"exportToERP"),W||null!==e&&void 0!==e&&e.isItemStatusValueChange)||(W=null===D||void 0===D||null===(F=D.ERPStatus)||void 0===F?void 0:F.toLowerCase(),w(W,null===e||void 0===e?void 0:e.id,"itemStatus"))}))}},A=async(e,l)=>{var i;const n=o.y.getState(),a=n.mcoDetails.responseData||{},d=n.mcoDetails.currentMcoDetails||{},v=new t.h;let s=await T();s=null!==l&&void 0!==l&&l.length?l:R({key:"name",direction:"asc"});const u=(null===(i=s)||void 0===i?void 0:i.map((e=>{var l,i;let o=(null===a||void 0===a?void 0:a.itemERPStatus)&&(null===a||void 0===a?void 0:a.itemERPStatus.filter((l=>(null===l||void 0===l?void 0:l.Item_Name)===(null===e||void 0===e?void 0:e.name))));return o=null!==(l=o)&&void 0!==l&&l.length?null===(i=o[0])||void 0===i?void 0:i.status:"Not yet processed!",e.ErpStatus=o,e})))||[],r=await v.exportMCOData({mcoProperties:e,mcoaffectedItem:u,ERPstatus:null===d||void 0===d?void 0:d.ERPstatus,ERPErrorDescription:null===d||void 0===d?void 0:d.ERPErrorDescription});return console.log(r),r},R=e=>{const l=o.y.getState(),i=l.mcoDetails.responseData||{},t=l.mcoDetails.affectedPartsData||[];let n=(null===i||void 0===i?void 0:i.mcoaffectedItem)||[];if(null!==t&&void 0!==t&&t.length&&(n=t),!e.key)return n;console.log(e,"=====sortConfig");let a=[];return a="materialTypeTemplate"===e.key?[...n].map((e=>(e.materialType=null!==e&&void 0!==e&&e.materialType?null===e||void 0===e?void 0:e.materialType:{name:"Unassigned"},e))).sort(((l,i)=>{var o,t,n,a;return(null===(o=l.materialType)||void 0===o?void 0:o.name)<(null===(t=i.materialType)||void 0===t?void 0:t.name)?"asc"===e.direction?-1:1:(null===(n=l.materialType)||void 0===n?void 0:n.name)>(null===(a=i.materialType)||void 0===a?void 0:a.name)?"asc"===e.direction?1:-1:0}))||[]:[...n].sort(((l,i)=>l[e.key]<i[e.key]?"asc"===e.direction?-1:1:l[e.key]>i[e.key]?"asc"===e.direction?1:-1:0))||[],console.log(a,"========sortedData"),a},D=function(){var e;let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=l;var o,t;Array.isArray(l)&&(i=null===(o=i)||void 0===o||null===(t=o.flat())||void 0===t?void 0:t.join());return i=null===(e=i)||void 0===e?void 0:e.replaceAll("/","").replaceAll("[","").replaceAll("]","").replaceAll('"',"").replaceAll('"',""),i},S=async()=>{var e;const l=o.y.getState();return(null===l||void 0===l||null===(e=l.mcoDetails)||void 0===e?void 0:e.isMaterialFormEdited)||!1},C=(e,l)=>{console.error(`Error in ${l}:`,e)}},31185:()=>{},71865:e=>{e.exports=JSON.parse('{"messages":{"validationMessages":{"TEMPLATE_UNASSIGN":"{0} {1} Oracle Template is unassigned in plant(s):","REV_NOT_COMPATIBLE_WITH_ORACLE_EXISTING":"{0} {1} Oracle Template value ANY ITEM MODEL ORACLE EXISTING in following plant(s) can only be used on part whose highest released or releasing on this ECO revision is 00 - 99:","CHANGE_ORACLE_TEMPLATE_ON_INACTIVE":"{0} {1} Changing Oracle Template on an Inactive MR not allowed for plant(s):","MBOM_STILL_USED_ON":"{0} {1} still used on MBOM(s):","NOT_ALLOWED_ON_MBOM":"{0} {1} Oracle Template value not allowed on following MBOMs: {2}","HAS_MBOM_WITH_NO_CHILDREN":"Oracle Template is Make type for {0} {1} in plant(s) {2}.  Must have EBOM.","CHILD_PART_MR_NOT_ASSIGNED":"Following child part(s) do not have Manufacturing Responsibility same as parent {0} or are Prepending on another ECO:\\n {1}.","NotAllowedOnMBOMChildren":"Following child part(s) have Oracle Template value that is not allowed on MBOM of {0} {1}:\\n {2}","FromToNotAllowed":"{0} {1} Oracle Template value {2} in plant MVO is not an allowed change for previous sequence Oracle Template value {3}.","NotAllowedToHaveEBOM":"{0} {1} is not allowed to have an EBOM for MVO Oracle Template value {2}.","NotAllowedMVO":"{0} {1} Oracle Template value {2} is either not allowed for part type {0} or not allowed for plant MVO.","StillActiveInOtherPlants":"{0} {1} cannot be deactivated in plant MVO while still active in plant(s):","MVOMRNotCurrentOrOnThisECOMessage":"{0} {1} Manufacturing Responsibility for MVO is not Current and is not being assigned on this ECO.","MakeInNonRDOPlant":"{0} {1} is being assigned to plant {2} with a Make type template, which is not allowed.  A part is only allowed to have an MBOM in plants that are associated with the Design Responsibility business unit for the part.","NotCompatibleOrAllowed":"{0} {1} Oracle Template value {2} in plant {3} is not allowed for one of the following reasons: 1) It is not allowed for part type {0}, 2) It is not compatible with MVO Oracle Template value {4}, or 3) It is not an allowed value for plant {3}.","NotAssignedToPurchaseValidationPlant":"{0} {1} is assigned to {2} with template {3} which requires assignment to Purchase Validation plant {4}.  Either change template for {2} or create Manufacturing Responsibility to {4}.","NotAssignedToPrimaryPlant":"{0} {1} is assigned to Purchase Validation plant {2} which requires assignment to {3}.  Either delete Manufacturing Responsibility to {2} or create Manufacturing Responsibility to {3}.","NotCompatible":"{0} {1} Oracle Template value {2} in plant {3} is not compatible with MVO Oracle Template value {4}.","NonMVONotCompatible":"{0} {1} Oracle Template value must be compatible with following plants:"},"SAP":{"templateUnassigned":"{0}:{1} part Material Type is Unassigned!"},"ORACLE":{"templateUnassigned":"{0}:{1} part Oracle Template is Unassigned!"}}}')},13286:e=>{e.exports=JSON.parse('{"systemSettings":{"3dxr21x-u1":"onPrem","3dxs12":"onPrem","3dx":"onPrem","3dxr21x-u12":"Cloud"},"bos":{"ExcludedSpecificationTypes":["ETO Face to Face","CAD Model"]},"mmiMBOM":{"ComAssyOptionalNo":["EMR ATO MTO MAKE FLOW","EMR ATO MTO BUY FLOW","EMR ATO MTO VIRTUAL FLOW"]},"masterPlants":["MVO","MMP03","MMP01","MMEP1"],"sapPlantConfiguration":{"SAP P01":"MMP01","SAP P03":"MMP03","SAP EP1":"MMEP1"}}')}}]);
//# sourceMappingURL=912.ec57f0cc.chunk.js.map