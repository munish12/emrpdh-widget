"use strict";(self.webpackChunkerp_product_hub=self.webpackChunkerp_product_hub||[]).push([[260],{4260:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var s=n(72791),l=n(94294),a=n(93274),r=n(6394),i=n(16029),o=n(56294),d=(n(18214),n(80184));const c=e=>{let{speclistsArr:t,selected:n,onSelectionChange:l}=e;const[a,r]=(0,s.useState)(t||[]),c=(0,s.useRef)(null);return(0,s.useEffect)((()=>{r(t)}),[t]),(0,d.jsx)(i.Z,{width:"100%",overflow:"auto",children:(0,d.jsx)(o.ZP,{idProperty:"id",showZebraRows:!1,style:{minHeight:550},columns:[{name:"obsoletePart",header:"Type",defaultFlex:1,defaultWidth:50,render:e=>{var t,n;let{data:s}=e;return(0,d.jsx)("div",{children:(null===s||void 0===s||null===(t=s.obsoletePartData)||void 0===t||null===(n=t.receivedPayload)||void 0===n?void 0:n.type)||"-"})}},{name:"name",header:"Name",defaultFlex:1,defaultWidth:50,render:e=>{var t,n;let{data:s}=e;return(0,d.jsx)("div",{children:null===s||void 0===s||null===(t=s.obsoletePartData)||void 0===t||null===(n=t.affectedItems[0])||void 0===n?void 0:n.name})}},{name:"revision",header:"Revision",defaultFlex:1,defaultWidth:50,render:e=>{var t,n;let{data:s}=e;return(0,d.jsx)("div",{children:null===s||void 0===s||null===(t=s.obsoletePartData)||void 0===t||null===(n=t.affectedItems[0])||void 0===n?void 0:n.revision})}},{name:"description",header:"Description",defaultFlex:1,defaultWidth:50,render:e=>{var t,n;let{data:s}=e;return(0,d.jsx)("div",{children:null===s||void 0===s||null===(t=s.obsoletePartData)||void 0===t||null===(n=t.affectedItems[0])||void 0===n?void 0:n.description})}},{name:"obsoleteStatus",header:"Status",defaultFlex:1,defaultWidth:50,render:e=>{let{data:t}=e;return(0,d.jsx)("div",{children:null===t||void 0===t?void 0:t.obsoleteStatus})}},{name:"obsoleteMessage",header:"Message",defaultFlex:1,defaultWidth:50,render:e=>{let{data:t}=e;return(0,d.jsx)("div",{style:{textWrap:"wrap"},children:null!==t&&void 0!==t&&t.obsoleteMessage&&""!==(null===t||void 0===t?void 0:t.obsoleteMessage)?null===t||void 0===t?void 0:t.obsoleteMessage:"-"})}}],dataSource:a,checkboxColumn:!0,selected:n,onSelectionChange:l,handle:e=>c.current=e?e.current:null,pagination:!0,defaultLimit:100,renderScroller:()=>{var e,t;return null===c||void 0===c||null===(e=c.current)||void 0===e?void 0:e.setScrollTop(0==(null===l||void 0===l?void 0:l.length)?0:null===c||void 0===c||null===(t=c.current)||void 0===t?void 0:t.getScrollTop())}})})};var u=n(31220),v=n(96171),h=n(5574),m=n(97123),p=n(39157),x=n(51691),b=n(65661),g=n(61419),j=n(10765),f=n(85523),Z=n(68096),P=n(17133),S=n(61889),y=n(33488),D=n(10778);const w=e=>{const t=new y.t,[n,r]=(0,s.useState)(!1),[o,c]=(0,s.useState)((null===e||void 0===e?void 0:e.speclistsArr)||[]),[u,v]=(0,s.useState)("allData"),[w,k]=(0,s.useState)(!1),[E,A]=(0,s.useState)(!1),[C,I]=(0,s.useState)(!1),[F,M]=(0,s.useState)(null);console.log("speclistsArr",e);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.Z,{variant:"contained",onClick:()=>{r(!0)},children:"Export"}),(0,d.jsxs)(h.Z,{open:n,children:[(0,d.jsx)(b.Z,{style:{cursor:"move"},id:"draggable-dialog-title",children:"Export Template"}),(0,d.jsx)(p.Z,{children:(0,d.jsx)(x.Z,{children:(0,d.jsx)(i.Z,{width:"100%",overflow:"auto",children:(0,d.jsx)(a.sF,{children:(0,d.jsx)(S.ZP,{item:!0,md:12,sm:12,xs:12,children:(0,d.jsx)(S.ZP,{container:!0,alignItems:"center",children:(0,d.jsxs)(Z.Z,{children:[(0,d.jsx)(P.Z,{id:"demo-controlled-radio-buttons-group",children:"Select Data to Export"}),(0,d.jsxs)(j.Z,{"aria-labelledby":"demo-controlled-radio-buttons-group",name:"controlled-radio-buttons-group",value:u,onChange:t=>{v(t.target.value),"allData"===t.target.value?c(null===e||void 0===e?void 0:e.speclistsArr):c(null===e||void 0===e?void 0:e.filterTemplateData)},children:[(0,d.jsx)(f.Z,{value:"allData",control:(0,d.jsx)(g.Z,{}),label:"All Data"}),(0,d.jsx)(f.Z,{value:"selectedData",control:(0,d.jsx)(g.Z,{}),label:"Selected Data"})]})]})})})})})})}),(0,d.jsxs)(m.Z,{children:[(0,d.jsx)(l.Z,{autoFocus:!0,onClick:()=>{r(!1)},children:"Cancel"}),(0,d.jsx)(l.Z,{onClick:()=>{r(!1);let n=("allData"!==u?null===e||void 0===e?void 0:e.filterTemplateData:null===e||void 0===e?void 0:e.speclistsArr)||[],s=null===n||void 0===n?void 0:n.map((e=>{var t,n,s,l,a,r,i,o;return{Type:null===(t=e.obsoletePartData)||void 0===t||null===(n=t.receivedPayload)||void 0===n?void 0:n.type,Name:null===(s=e.obsoletePartData)||void 0===s||null===(l=s.affectedItems[0])||void 0===l?void 0:l.name,Revision:null===(a=e.obsoletePartData)||void 0===a||null===(r=a.affectedItems[0])||void 0===r?void 0:r.revision,Description:null===(i=e.obsoletePartData)||void 0===i||null===(o=i.affectedItems[0])||void 0===o?void 0:o.description,Status:e.obsoleteStatus,Message:e.obsoleteMessage}}));t.exportTemplate({data:s,sheet_name:"Obsolete Part List"}).then((e=>{A(e),k(!0),I(!0),M({severity:null===e||void 0===e?void 0:e.status,desc:null===e||void 0===e?void 0:e.msg})}))},children:"Export"})]})]}),F?(0,d.jsx)(D.Z,{openAlert:C,openDesc:F,setOpenAlert:I}):(0,d.jsx)(d.Fragment,{})]})};var k=n(66934),E=n(27391),A=n(63466);n(31185);const C=(0,k.ZP)("div")((e=>{let{theme:t}=e;return{margin:"30px",[t.breakpoints.down("sm")]:{margin:"16px"},"& .breadcrumb":{marginBottom:"30px",[t.breakpoints.down("sm")]:{marginBottom:"16px"}}}})),I=()=>{var e,t;const n=new r.h,[o,h]=(0,s.useState)(),[m,p]=(0,s.useState)({}),[x,b]=(0,s.useState)(!1),[g,j]=(0,s.useState)(!1),[f,Z]=(0,s.useState)(null),[P,y]=(0,s.useState)([]),[D,k]=(0,s.useState)({}),[I,F]=(0,s.useState)(!0),M=(0,s.useRef)(null),T=null!==M&&void 0!==M&&null!==(e=M.current)&&void 0!==e&&e.dataMap?null===M||void 0===M||null===(t=M.current)||void 0===t?void 0:t.dataMap:null,L=e=>{try{b(!0);const t={...e,searchkey:e.searchkey+"*"};n.searchObsoletePartbyKey(t).then((e=>{e?(e.data.length?h(e.data):(j(!0),Z({severity:"error",desc:"No result found!"})),b(!1)):(j(!0),Z({severity:"error",desc:e}))})).catch((e=>e))}catch(t){return t}},N=(0,s.useCallback)((e=>{let{selected:t}=e;k(t),F(!1)}),[]);(0,s.useEffect)((()=>{var e;const t=!0===D?T:D,n=t&&(null===(e=Object.keys(t))||void 0===e?void 0:e.map((e=>t[e])))||[];y(n),n.forEach((e=>{"failed"===e.obsoleteStatus&&F(!0)}))}),[D,T]);return(0,d.jsxs)(C,{children:[(0,d.jsx)(i.Z,{className:"breadcrumb",children:(0,d.jsx)(a.aG,{routeSegments:[{name:"Check Part Obsolescence Progress"}]})}),(0,d.jsxs)(a.sF,{children:[(0,d.jsxs)(S.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,d.jsx)(S.ZP,{item:!0,md:12,sm:12,xs:12,className:"font-medium",children:(0,d.jsxs)(S.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,d.jsx)(S.ZP,{item:!0,md:3,sm:6,xs:12,className:"font-medium",children:(0,d.jsx)(E.Z,{type:"text",name:"search",size:"small",onChange:e=>{e.persist(),p({searchkey:e.target.value})},onKeyDown:e=>{if("Enter"===e.key){const t={...m,searchkey:e.target.value};p(t),L(t)}},value:(null===m||void 0===m?void 0:m.searchkey)||"",style:{width:"100%"},InputProps:{endAdornment:(0,d.jsx)(A.Z,{position:"end",children:"*"})}})}),(0,d.jsx)(S.ZP,{item:!0,md:6,sm:6,xs:12,children:(0,d.jsx)(l.Z,{variant:"contained",onClick:()=>{L(m)},children:"Search"})}),(0,d.jsxs)(S.ZP,{item:!0,md:3,sm:6,xs:12,alignItems:"right",children:[(0,d.jsx)(l.Z,{variant:"contained",disabled:!(1===(null===P||void 0===P?void 0:P.length)&&I),onClick:()=>{let e={id:P[0].id};b(!0),n.resendObsoletePart(e).then((e=>{e?(e.status&&(j(!0),Z({severity:"success"===e.status?"success":"error",desc:e.msg})),b(!1)):(j(!0),Z({severity:"error",desc:e})),b(!1)})).catch((e=>e))},style:{margin:"0 10px 0 10px"},children:"Re-send"}),(0,d.jsx)(w,{speclistsArr:o,filterTemplateData:P})]})]})}),(0,d.jsx)(S.ZP,{item:!0,md:12,sm:12,xs:12,children:(0,d.jsx)(c,{speclistsArr:o||[],isLoading:x,selected:D,onSelectionChange:N})})]}),f?(0,d.jsx)(v.Z,{openAlert:g,openDesc:f,setOpenAlert:j}):(0,d.jsx)(d.Fragment,{}),x?(0,d.jsx)("div",{style:{textAlign:"center"},children:(0,d.jsx)(u.Z,{show:x})}):(0,d.jsx)(d.Fragment,{})]})]})}},63466:(e,t,n)=>{n.d(t,{Z:()=>P});var s=n(63366),l=n(87462),a=n(72791),r=n(63733),i=n(94419),o=n(14036),d=n(20890),c=n(93840),u=n(52930),v=n(66934),h=n(75878),m=n(21217);function p(e){return(0,m.Z)("MuiInputAdornment",e)}const x=(0,h.Z)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var b,g=n(31402),j=n(80184);const f=["children","className","component","disablePointerEvents","disableTypography","position","variant"],Z=(0,v.ZP)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${(0,o.Z)(n.position)}`],!0===n.disablePointerEvents&&t.disablePointerEvents,t[n.variant]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,l.Z)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},"filled"===n.variant&&{[`&.${x.positionStart}&:not(.${x.hiddenLabel})`]:{marginTop:16}},"start"===n.position&&{marginRight:8},"end"===n.position&&{marginLeft:8},!0===n.disablePointerEvents&&{pointerEvents:"none"})})),P=a.forwardRef((function(e,t){const n=(0,g.Z)({props:e,name:"MuiInputAdornment"}),{children:v,className:h,component:m="div",disablePointerEvents:x=!1,disableTypography:P=!1,position:S,variant:y}=n,D=(0,s.Z)(n,f),w=(0,u.Z)()||{};let k=y;y&&w.variant,w&&!k&&(k=w.variant);const E=(0,l.Z)({},n,{hiddenLabel:w.hiddenLabel,size:w.size,disablePointerEvents:x,position:S,variant:k}),A=(e=>{const{classes:t,disablePointerEvents:n,hiddenLabel:s,position:l,size:a,variant:r}=e,d={root:["root",n&&"disablePointerEvents",l&&`position${(0,o.Z)(l)}`,r,s&&"hiddenLabel",a&&`size${(0,o.Z)(a)}`]};return(0,i.Z)(d,p,t)})(E);return(0,j.jsx)(c.Z.Provider,{value:null,children:(0,j.jsx)(Z,(0,l.Z)({as:m,ownerState:E,className:(0,r.Z)(A.root,h),ref:t},D,{children:"string"!==typeof v||P?(0,j.jsxs)(a.Fragment,{children:["start"===S?b||(b=(0,j.jsx)("span",{className:"notranslate",children:"\u200b"})):null,v]}):(0,j.jsx)(d.Z,{color:"text.secondary",children:v})}))})}))},31185:()=>{}}]);
//# sourceMappingURL=260.552a024f.chunk.js.map