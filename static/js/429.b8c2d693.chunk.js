"use strict";(self.webpackChunkerp_product_hub=self.webpackChunkerp_product_hub||[]).push([[429],{65077:(e,t,l)=>{l.d(t,{Z:()=>d});l(72791);var i=l(16236),n=l(94294),s=l(16029),a=l(97892),r=l.n(a),o=l(80184);const d=e=>{const{setOpenView:t,setView:l,onChange:a,value:d,...c}=e;return(0,o.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,o.jsx)(i.q,{...e}),(0,o.jsx)(n.Z,{onClick:()=>{const e=r()();a(e)},variant:"outlined",size:"small",style:{margin:"8px",position:"absolute",bottom:"2.5px",left:"2.5px"},children:"Today"})]})}},54869:(e,t,l)=>{l.d(t,{Z:()=>r});l(72791);var i=l(76633),n=l(16029),s=l(20068),a=l(80184);const r=function(e){let{title:t}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(s.Z,{title:t,children:(0,a.jsxs)(n.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,width:"100%",zIndex:9},children:[(0,a.jsx)(i.Z,{sx:{fontSize:60,color:"#1976d2",animation:"spin 1.5s linear infinite",width:"25px",height:"25px",position:"absolute"}}),(0,a.jsx)("style",{children:"\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        "})]})})})}},79725:(e,t,l)=>{l.r(t),l.d(t,{default:()=>ue});var i=l(72791),n=l(57689),s=l(93274),a=l(6394),r=l(66934),o=l(79836),d=l(16029),c=l(56890),u=l(35855),v=l(53994),h=l(53382),m=l(63033),p=l(94454),g=l(11087),x=l(6429),j=l.n(x),f=l(97892),y=l.n(f),Z=l(95048),C=l(13400),b=l(3746),w=l(20165),S=l(49141),P=l(54869),k=l(80184);const M=(0,r.ZP)(o.Z)((()=>({whiteSpace:"pre","& thead":{"& tr":{"& th":{paddingLeft:0,paddingRight:0}}},"& tbody":{"& tr":{"& td":{paddingLeft:0,textTransform:"capitalize"}}}}))),O=e=>{var t;return e&&"object"===typeof e&&null!==(t=null===e||void 0===e?void 0:e.ERPstatus)&&void 0!==t?t:"-"},R={success:"limegreen",failed:"red",inprogress:"grey"},D=e=>{const{allCaMCODetails:t,caLifeCycleData:l}=(0,Z.v9)((e=>({allCaMCODetails:e.mcoDetails.allCaMCODetails,caLifeCycleData:e.mcoDetails.caLifeCycleData})),Z.wU);let{mcolistsArr:n,selected:s,setSelected:a,caRelatedEachMCODetails:r,selectedData:o,setSelectedData:x}=e;const[f,y]=(0,i.useState)(0),[D,E]=(0,i.useState)(100),[I,F]=(0,i.useState)(n||[]),[V,A]=(0,i.useState)(!1),[T,L]=(0,i.useState)(null),[N,W]=(0,i.useState)(!1),U=localStorage.getItem("instance");return(0,i.useEffect)((()=>{const e=null!==n&&void 0!==n&&n.length?n.slice(f*D,f*D+D):[];F(e),null!==I&&void 0!==I&&I.find((e=>{var t;return"inprogress"===(null===l||void 0===l||null===(t=l[null===e||void 0===e?void 0:e.name])||void 0===t?void 0:t.promoted)}))?W(!0):W(!1)}),[f,D,n,t,s]),(0,i.useEffect)((()=>{const e=s.map((e=>I.find((t=>t.id===e))));x(e)}),[s,I,x]),(0,k.jsxs)(d.Z,{width:"100%",overflow:"auto",children:[(0,k.jsxs)(M,{children:[(0,k.jsx)(c.Z,{children:(0,k.jsxs)(u.Z,{children:[(0,k.jsx)(v.Z,{padding:"checkbox",children:(0,k.jsx)(p.Z,{color:"primary",indeterminate:s.length>0&&s.length<I.length,checked:I.length>0&&s.length===I.length,onChange:e=>{if(e.target.checked){const e=I.filter((e=>e.name.includes("MVO"))),t=I.filter((e=>!e.name.includes("MVO"))),l=[...e,...t].map((e=>e.id)),i=[...e,...t];return a(l),void x(i)}a([]),x([])},inputProps:{"aria-label":"select all desserts"}})}),(0,k.jsx)(v.Z,{align:"left",style:{width:"10%",wordWrap:"word-break"},children:"MCO Name"}),N?(0,k.jsx)(v.Z,{align:"left",style:{width:"50px",wordWrap:"word-break"}}):null,(0,k.jsx)(v.Z,{align:"left",style:{width:"10%",wordWrap:"word-break"},children:"RDO"}),(0,k.jsx)(v.Z,{align:"left",style:{width:"5%",wordWrap:"word-break"},children:"State"}),(0,k.jsx)(v.Z,{align:"left",style:{width:"5%",wordWrap:"word-break"},children:"Plant"}),(0,k.jsx)(v.Z,{align:"left",style:{wordWrap:"word-break"},children:"Start Date"}),(0,k.jsx)(v.Z,{align:"center",style:{width:"10%",wordWrap:"word-break"},children:"Export Status"}),(0,k.jsx)(v.Z,{align:"center",style:{wordWrap:"word-break"},children:"Failed Integration Step"}),(0,k.jsx)(v.Z,{align:"left",style:{width:"10%",wordWrap:"word-break"},children:"Resp. Mfg Eng."}),(0,k.jsx)(v.Z,{align:"left",style:{wordWrap:"word-break"},children:"Resp. Senior Mfg Eng."})]})}),(0,k.jsx)(h.Z,{children:null!==I&&void 0!==I&&I.length?I.map(((e,i)=>{var n,r,d,c;const h=e.name,m=(f=e.id,-1!==s.indexOf(f));var f;const y=`enhanced-table-checkbox-${i}`;let Z=t||{},S={};return null!==(n=Object.keys(Z))&&void 0!==n&&n.length&&(S=null===Z||void 0===Z?void 0:Z[h]),(0,k.jsxs)(u.Z,{onClick:t=>((e,t)=>{const l=s.indexOf(t);let i=[],n=[];if(-1===l){const e=I.find((e=>e.id===t));e.name.includes("MVO")?(i=[t,...s],n=[e,...o]):(i=i.concat(s,t),n=n.concat(o,e))}else 0===l?(i=i.concat(s.slice(1)),n=n.concat(o.slice(1))):l===s.length-1?(i=i.concat(s.slice(0,-1)),n=n.concat(o.slice(0,-1))):l>0&&(i=i.concat(s.slice(0,l),s.slice(l+1)),n=n.concat(o.slice(0,l),o.slice(l+1)));a(i),x(n)})(0,e.id),children:[(0,k.jsx)(v.Z,{padding:"checkbox",children:(0,k.jsx)(p.Z,{color:"primary",checked:m,inputProps:{"aria-labelledby":y}})}),(0,k.jsx)(v.Z,{align:"left",children:(0,k.jsx)(g.Link,{to:`/mcodetail/${"onPrem"===U?null===e||void 0===e?void 0:e.title:"Route"===(null===e||void 0===e?void 0:e.type)?null===e||void 0===e?void 0:e.parentMcoId:null===e||void 0===e?void 0:e.id}`,style:{color:"#1976d2"},onClick:()=>{"Route"===(null===e||void 0===e?void 0:e.type)&&null!==e&&void 0!==e&&e.parentMcoId&&null!==e&&void 0!==e&&e.plantType&&""!==(null===e||void 0===e?void 0:e.plantType)?(localStorage.setItem("plantType",e.plantType),localStorage.setItem("selectedRouteId",e.id)):(localStorage.removeItem("plantType"),localStorage.removeItem("selectedRouteId"))},children:null===e||void 0===e?void 0:e.title})}),N?"inprogress"===(null===l||void 0===l||null===(r=l[null===e||void 0===e?void 0:e.name])||void 0===r?void 0:r.promoted)?(0,k.jsx)(v.Z,{align:"left",children:(0,k.jsx)("div",{style:{position:"relative"},children:(0,k.jsx)(P.Z,{title:"inprogress"})})}):(0,k.jsx)(v.Z,{align:"left"}):null,(0,k.jsx)(v.Z,{align:"left",children:null===e||void 0===e?void 0:e.businessUnit}),(0,k.jsx)(v.Z,{align:"left",children:null===e||void 0===e?void 0:e.mcostate}),(0,k.jsx)(v.Z,{align:"left",children:null===e||void 0===e?void 0:e.plantName}),(0,k.jsx)(v.Z,{align:"left",children:null===e||void 0===e?void 0:e.startdate}),(0,k.jsx)(v.Z,{align:"center",children:O(S)}),(0,k.jsx)(v.Z,{align:"center",children:S&&null!==(d=Object.keys(S||{}))&&void 0!==d&&d.length&&null!==(c=S)&&void 0!==c&&c.ERPstatus?(0,k.jsx)(C.Z,{"aria-label":"close",onClick:e=>{e.stopPropagation(),L(S),A(!0)},sx:e=>{var t,l,i,n,s;return{position:"relative",right:0,top:0,color:null!==(t=["success","failed","inprogress"])&&void 0!==t&&t.includes(null===(l=S)||void 0===l||null===(i=l.ERPstatus)||void 0===i?void 0:i.toLowerCase())?null===R||void 0===R?void 0:R[null===(n=S)||void 0===n||null===(s=n.ERPstatus)||void 0===s?void 0:s.toLowerCase()]:"#1976d2"}},children:(0,k.jsx)(b.Z,{})}):(0,k.jsx)(C.Z,{"aria-label":"close",onClick:e=>{e.stopPropagation()},sx:e=>({position:"relative",right:0,top:0,color:e.palette.grey[500]}),children:(0,k.jsx)(w.Z,{})})}),(0,k.jsx)(v.Z,{align:"left",children:null===e||void 0===e?void 0:e.rme}),(0,k.jsx)(v.Z,{align:"left",children:null===e||void 0===e?void 0:e.rsme})]},j().generate())})):(0,k.jsx)(u.Z,{children:(0,k.jsx)(v.Z,{align:"left",colSpan:10,style:{textAlign:"center"},children:"No result found!"})},j().generate())})]}),null!==n&&void 0!==n&&n.length?(0,k.jsx)(m.Z,{sx:{px:2},page:f,component:"div",rowsPerPage:D,count:null===n||void 0===n?void 0:n.length,onPageChange:(e,t)=>{y(t),a([]),x([])},rowsPerPageOptions:[100,200,300,400,500],onRowsPerPageChange:e=>{E(+e.target.value),y(0)},nextIconButtonProps:{"aria-label":"Next Page"},backIconButtonProps:{"aria-label":"Previous Page"}}):(0,k.jsx)(k.Fragment,{}),V?(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(S.Z,{erpStatusReasonDialogBox:V,updateERPStatusReason:()=>{A(!1)},selectedMCO:T,setSelectedMCO:L})}):null]})};var E=l(61889),I=l(27391),F=l(49644),V=l(85523),A=l(10765),T=l(61419),L=l(5574),N=l(65661),W=l(39157),U=l(51691),$=l(97123),B=l(94294),Y=l(64387),H=l(58406),z=l(92506),_=l(8007),q=l(71652),G=l(24750),J=l(26614),K=l(65077);const Q=[{name:"PropertyFieldName",mandatory:"Y",dataType:"string",inputType:"select",defaultValues:"",values:[{startdate:"Start date",rme:"RME",rsme:"RSME",description:"Description"}]},{name:"PropertyFieldValue",mandatory:"Y",dataType:"string",inputType:"text",defaultValues:"",values:""}],X=e=>{let{open:t,handleConfirmation:l,handleCancellation:i}=e;return(0,k.jsxs)(L.Z,{open:t,children:[(0,k.jsx)(N.Z,{children:"Confirmation"}),(0,k.jsx)(W.Z,{children:(0,k.jsx)(U.Z,{children:"Are you sure? Do you want to update the data for selected MCO's?"})}),(0,k.jsxs)($.Z,{children:[(0,k.jsx)(B.Z,{onClick:i,color:"primary",children:"Cancel"}),(0,k.jsx)(B.Z,{onClick:l,color:"primary",autoFocus:!0,children:"Save"})]})]})},ee=(0,i.forwardRef)(((e,t)=>{const{RSMEList:l,RMEList:n}=(0,Z.v9)((e=>e.mcoDetails)),[s,a]=(0,i.useState)([]),[r,o]=(0,i.useState)({}),[c,u]=(0,i.useState)({}),[v,h]=(0,i.useState)({}),[m,g]=(0,i.useState)(!1);(0,i.useEffect)((()=>{a(Q)}),[]),(0,i.useEffect)((()=>{let e={},t={};null===s||void 0===s||s.forEach((l=>{const i=null===l||void 0===l?void 0:l.name;"Y"===(null===l||void 0===l?void 0:l.mandatory)&&(e[i]=_.Z_().required(i+" required!")),""!==(null===l||void 0===l?void 0:l.defaultValues)?t[i]=null===l||void 0===l?void 0:l.defaultValues:t[i]=""})),h(e),o(t)}),[s]);const x=_.Ry().shape(v),f={startdate:"Start date",rme:"Responsible Manufacturing Engineer",rsme:"Responsible Senior Manufacturing Engineer",description:"Description"};return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(z.J9,{initialValues:r,onSubmit:e=>{g(!0),u(e)},enableReinitialize:!0,validationSchema:x,validateOnChange:!1,validateOnBlur:!1,children:function(e){let{values:a,errors:r,touched:o,handleChange:c,handleBlur:u,handleSubmit:v,isSubmitting:h,setSubmitting:m,setFieldValue:g,validateForm:x,isValid:Z,submitForm:C}=e;return(0,i.useEffect)((()=>{setTimeout((async()=>{}),500)}),[g]),(0,i.useImperativeHandle)(t,(()=>({callsubmitForm:()=>(C(),Z)}))),(0,k.jsx)("form",{onSubmit:v,children:(0,k.jsx)("div",{children:s.length?null===s||void 0===s?void 0:s.map(((e,t)=>{var i,o,c;const u=null===e||void 0===e?void 0:e.name,v=a[u]||(null===e||void 0===e?void 0:e.defaultValues);let h=null===e||void 0===e?void 0:e.inputType,m=a[null===(i=s[0])||void 0===i?void 0:i.name];if(t>0&&!["startdate","rme","rsme","description"].includes(m))return!0;t>0&&["startdate"].includes(m)?h="date":t>0&&["rme","rsme"].includes(m)&&(h="autocomplete");let x=null;var Z;["rme","rsme"].includes(m)&&(x=null===(Z="rme"===m?n:l)||void 0===Z?void 0:Z.find((e=>e.key===v)));return(0,k.jsx)("div",{className:"attribute-section",children:(0,k.jsxs)(E.ZP,{container:!0,spacing:3,alignItems:"center",children:[(0,k.jsx)(E.ZP,{item:!0,md:4,sm:6,xs:12,className:"font-medium",children:(0,k.jsxs)("span",{children:[t>0?f[m]:null===e||void 0===e?void 0:e.name,"Y"===(null===e||void 0===e?void 0:e.mandatory)?(0,k.jsx)("span",{style:{color:"red"},children:"*"}):""]})}),(0,k.jsxs)(E.ZP,{item:!0,md:8,sm:6,xs:12,children:["text"===h&&(0,k.jsx)(I.Z,{className:"mb-4 w-full ",color:null!==r&&void 0!==r&&r[u]?"warning":"",fullWidth:!0,size:"small",variant:"outlined",id:u,name:u,value:v,onChange:e=>{g(u,e.target.value)},type:"text",style:{marginBottom:"10px"}}),"select"===h&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{children:a[u]}),(0,k.jsxs)(H.Z,{value:v,onChange:e=>{g(u,e.target.value)},displayEmpty:!0,renderValue:t=>t?(null===e||void 0===e?void 0:e.values.length)&&(null===e||void 0===e?void 0:e.values[0][t]):(0,k.jsx)("em",{children:"--Select--"}),style:{height:"37.13px",marginBottom:"1rem",width:"100%"},children:[(0,k.jsx)(Y.Z,{id:"",children:"Select"}),(null===e||void 0===e?void 0:e.values.length)&&Object.keys((null===e||void 0===e?void 0:e.values[0])||{}).map((t=>(0,k.jsx)(Y.Z,{value:t,children:null===e||void 0===e?void 0:e.values[0][t]},j().generate())))]})]}),"date"===h&&(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(q._,{dateAdapter:G.y,children:(0,k.jsx)(J.x,{minDate:y()(),views:["year","month","day"],value:null,onChange:e=>{if(e){let t=y()(e.$d).format("MM/DD/YYYY hh:mm:ss A");"Invalid Date"!==t?g(u,t):e||g(u,e)}else e||g(u,e)},sx:{padding:"0px!important",width:"100%!important",marginBottom:"1rem !important","@global":{input:{padding:"8.5px 14px!important",height:"0.4375em!important"}}},slots:{toolbar:K.Z}})})}),"autocomplete"===h&&(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(F.Z,{id:"autoComplete_"+t,value:(null===(o=x)||void 0===o?void 0:o.label)||null,autoHighlight:!0,onChange:(e,t)=>{const l=t&&t.key||null;g(u,l)},onInputChange:(e,t)=>{},options:"rme"===m?n:l,sx:{width:"100%",padding:"0px 0px 10px 0px"},renderInput:e=>(0,k.jsx)(I.Z,{...e}),renderOption:(e,t)=>(0,k.jsx)(d.Z,{component:"li",sx:{"& > img":{mr:2,flexShrink:0}},...e,children:t.label})})}),"checkbox"===h&&(0,k.jsx)(k.Fragment,{children:null===e||void 0===e?void 0:e.values.map(((e,t)=>(0,k.jsx)("div",{children:(0,k.jsx)(V.Z,{value:e,label:e,labelPlacement:"end",control:(0,k.jsx)(p.Z,{})})},j().generate())))}),"radio"===h&&(0,k.jsx)(A.Z,{row:!0,name:u,sx:{mb:2},value:null!==(c=a[u])&&void 0!==c?c:"",onChange:e=>{g(u,e.target.value)},style:{display:"flex"},children:null===e||void 0===e?void 0:e.values.map(((e,t)=>(0,k.jsx)("div",{children:(0,k.jsx)(V.Z,{value:e,label:e,labelPlacement:"end",control:(0,k.jsx)(T.Z,{color:"secondary"})})},j().generate())))}),(0,k.jsx)("div",{style:{textAlign:"left",color:"red",position:"relative",top:"-15px"},children:null===r||void 0===r?void 0:r[u]})]})]})})})):(0,k.jsx)("div",{children:"Form data fields not found."})})})}}),(0,k.jsx)(X,{open:m,handleConfirmation:()=>{null===e||void 0===e||e.saveMassUpdateFormDetails(c),g(!1)},handleCancellation:()=>{g(!1)}})]})}));var te=l(31220),le=l(96171),ie=l(63466),ne=l(50533),se=l(80245),ae=l(25573),re=l(57289),oe=l(69383);l(31185);const de=(0,r.ZP)("div")((e=>{let{theme:t}=e;return{margin:"30px",[t.breakpoints.down("sm")]:{margin:"16px"},"& .breadcrumb":{marginBottom:"30px",[t.breakpoints.down("sm")]:{marginBottom:"16px"}}}}));function ce(e){return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(E.ZP,{item:!0,md:3,sm:6,xs:6,children:[e.label,(0,k.jsx)("span",{className:"colonSpan",children:":"})]}),(0,k.jsx)(E.ZP,{item:!0,md:9,sm:6,xs:6,children:e.value})]})}const ue=()=>{var e;const{isPageHavingIssue:t,caRelatedEachMCODetails:l,massUpdateChanges:r}=(0,Z.v9)((e=>({isPageHavingIssue:e.mcoDetails.isPageHavingIssue,caRelatedEachMCODetails:e.mcoDetails.caRelatedEachMCODetails,massUpdateChanges:e.mcoDetails.massUpdateChanges})),Z.wU),o=(0,Z.I0)(),[c,u]=(0,i.useState)({}),[v,h]=(0,i.useState)([]),[m,p]=(0,i.useState)(""),[g,x]=(0,i.useState)(!1),[f,y]=(0,i.useState)(!1),[C,b]=(0,i.useState)(null),[w,S]=(0,i.useState)(!1),[P,M]=(0,i.useState)([]),[O,R]=(0,i.useState)([]),[F,V]=(0,i.useState)([]),[A,T]=(0,i.useState)(!1),[Y,H]=(0,i.useState)({}),z=(0,n.UO)(),_=(0,i.useRef)({}),q=new a.h,G=localStorage.getItem("instance");console.log("mcolistsArr",v);const J=e=>{try{if(x(!0),""!==e&&null!==e){var t;const l=null===c||void 0===c||null===(t=c.relatedMCOs)||void 0===t?void 0:t.filter((t=>JSON.stringify(t).toLowerCase().includes(e.toLowerCase())));h(l)}else h(null===c||void 0===c?void 0:c.relatedMCOs);x(!1)}catch(l){o((0,se.$V)({isPageHavingIssue:!0}))}},K=async e=>{if(x(!0),!P.length)return y(!0),b({severity:"error",desc:"Please select mco's."}),void x(!1);let t=!1,l=!1;const i=[];for(const d of P){var n,s,a;const r=null===v||void 0===v?void 0:v.find((e=>e.id===d)),o=null===r||void 0===r||null===(n=r.current)||void 0===n?void 0:n.toLowerCase(),c=null===r||void 0===r||null===(s=r.mcostate)||void 0===s?void 0:s.toLowerCase(),u=O.filter((e=>new Date(null===e||void 0===e?void 0:e.startdate).getFullYear()>=2049)).map((e=>null===e||void 0===e?void 0:e.name));if(u.length>0)return y(!0),b({severity:"error",desc:`Please set MCO date ${u.join(", ")} , promotion cannot be processed with default date.`}),void x(!1);if("review"!==c&&"demote"===e)return y(!0),b({severity:"error",desc:"Demote is only available from Review to Create!"}),void x(!1);if("implemented"===c&&"promote"===e)return y(!0),b({severity:"error",desc:"MCOs cannot be promoted as they are already in an implemented state."}),void x(!1);null!==r&&void 0!==r&&null!==(a=r.name)&&void 0!==a&&a.includes("MVO")&&["create","review"].includes(o)&&P.length>1&&(t=!0),["release"].includes(o)&&(l=!0),i.push(null===r||void 0===r?void 0:r.name),"create"===o&&"promote"===e?r.current="review":"review"===o&&"promote"===e?r.current="release":"review"===o&&"demote"===e&&(r.current="create")}if(t)return y(!0),b({severity:"error",desc:"Please release MVO related mco's first and then others."}),void x(!1);if(l)return y(!0),b({severity:"error",desc:"Please un-select the released mco."}),void x(!1);const{valid:r,errDesc:o}=await(0,ae.lV)(i,e);if(r)await Q(),y(!0),b({severity:"success",desc:o});else if(Array.isArray(o)){let e=[];null===o||void 0===o||o.forEach(((t,l)=>{e.push((0,k.jsx)("li",{children:t},j().generate()))})),y(!0),b({severity:"error",desc:e})}else y(!0),b({severity:"error",desc:o});x(!1)},Q=async()=>{try{x(!0),await o((0,se.VM)()),"onPrem"===G&&await(0,re.IT)(),await q.getCARelatedMco(z).then((async e=>{if(Object.keys(e).length)if(Array.isArray(null===e||void 0===e?void 0:e.relatedMCOs)&&null!==e&&void 0!==e&&e.relatedMCOs.length){var t,l,i,n;u(e);const s=[e.relatedMCOs[0]],a=null===(t=s[0])||void 0===t?void 0:t.title,r=(null===(l=e.relatedMCOs[1])||void 0===l||null===(i=l.routeProperties)||void 0===i?void 0:i.map((t=>{var l;return{...t,type:"Route",parentMcoId:null===(l=e.relatedMCOs[0])||void 0===l?void 0:l.id}})))||[];V(r);const d=r.filter((e=>{var t;return null===(t=e.title)||void 0===t?void 0:t.startsWith(a)})),c=r.some((e=>e.title.includes("Prerequisite")&&"Completed"!==e.mcostate));T(c);const v=r.find((e=>e.title.includes("Prerequisite")&&"Completed"!==e.mcostate));H(v);const m=d.map((e=>{var t;const l=null===(t=e.title)||void 0===t?void 0:t.split("-"),i=l.length>2&&l[2]!==a.split("-")[1]?l[l.length-1]:"";return{...e,plantType:i}}));console.log("updatedRoutes",m),o((0,se.xG)(m));const p=[...s,...m];h(p);const g=null===e||void 0===e||null===(n=e.relatedMCOs)||void 0===n?void 0:n.map((e=>({name:e.name,id:e.id})));await(0,ae.VQ)(g)}else y(!0),b({severity:"error",desc:"No result found!"});else y(!0),b({severity:"error",desc:e})})),x(!1)}catch(e){o((0,se.$V)({isPageHavingIssue:!0}))}};return(0,i.useEffect)((()=>{try{x(!0),Q()}catch(e){x(!1)}}),[]),(0,k.jsx)(de,{children:t?(0,k.jsx)(oe.Z,{}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(d.Z,{className:"breadcrumb",children:(0,k.jsx)(E.ZP,{container:!0,spacing:1,alignItems:"center",children:(0,k.jsx)(E.ZP,{item:!0,md:6,sm:12,xs:12,children:(0,k.jsx)(s.aG,{routeSegments:[{name:"CA / MECO Details"}]})})})}),(0,k.jsxs)(s.sF,{children:[(0,k.jsxs)(E.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,k.jsx)(E.ZP,{container:!0,spacing:2,alignItems:"center",className:"caDetailsContainer",children:Object.keys(c).length?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(ce,{label:"Name",value:c.name}),(0,k.jsx)(ce,{label:"State",value:c.caState}),(0,k.jsx)(ce,{label:"Description",value:c.description})]}):(0,k.jsx)(k.Fragment,{})}),(0,k.jsx)(E.ZP,{item:!0,md:12,sm:12,xs:12,children:(0,k.jsx)("h4",{children:"Related MCO's:"})}),(0,k.jsx)(E.ZP,{item:!0,md:3,sm:6,xs:12,className:"font-medium",children:(0,k.jsx)(I.Z,{type:"text",name:"search",size:"small",onChange:e=>{e.persist();const t=e.target.value;p(t),J(t)},onKeyDown:e=>{if("Enter"===e.key){const t=e.target.value;p(t),J(t)}},value:m||"",style:{width:"100%"},InputProps:{endAdornment:(0,k.jsx)(ie.Z,{position:"end",children:"*"})}})}),(0,k.jsxs)(E.ZP,{item:!0,md:9,sm:6,xs:12,children:[(0,k.jsx)(B.Z,{variant:"contained",onClick:()=>{J(m)},children:"Search"}),(0,k.jsx)(B.Z,{variant:"contained",onClick:Q,style:{float:"right"},children:"Refresh"}),r&&null!==(e=Object.keys(r))&&void 0!==e&&e.length?(0,k.jsx)(B.Z,{variant:"contained",onClick:async()=>{var e;if(S(!1),x(!0),r&&null!==Object&&void 0!==Object&&null!==(e=Object.keys(r))&&void 0!==e&&e.length&&null!==P&&void 0!==P&&P.length){let e={};const t=(0,re.PB)(r);for(const l of P)e[l]=t;x(!0),await q.updateMCOObjects(e).then((async e=>{const t=[],l=[],i=[];if(Object.values(e).forEach((e=>{e.errorMsg?(t.push(e.errorMsg),i.push(e.name)):l.push(e.name)})),t.length>0)return await Q(),y(!0),void b({severity:"warning",desc:`${i.join(", ")} ${t[0]}${l.length>0?`. Updated successfully for: ${l.join(", ")}`:""}`});await Q(),y(!0),b({severity:"success",desc:"Mass update changes updated successfully."})})).finally((()=>{x(!1)}))}},style:{float:"right",marginRight:"15px"},children:"Save"}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(B.Z,{variant:"contained",onClick:()=>(async e=>{if(alert("asd"),x(!0),!P.length)return y(!0),b({severity:"error",desc:"Please select mco's."}),void x(!1);let t=!1,l=!1;const i=[];for(const o of P){var n,s;const e=null===v||void 0===v?void 0:v.find((e=>e.id===o));console.log("getSelectedRowData",e);const a=null===e||void 0===e||null===(n=e.current)||void 0===n?void 0:n.toLowerCase(),r=O.filter((e=>new Date(null===e||void 0===e?void 0:e.startdate).getFullYear()>=2049)).map((e=>null===e||void 0===e?void 0:e.name));if(r.length>0)return y(!0),b({severity:"error",desc:`Please set MCO date ${r.join(", ")} , promotion cannot be processed with default date.`}),void x(!1);null!==e&&void 0!==e&&null!==(s=e.name)&&void 0!==s&&s.includes("MVO")&&["create","review"].includes(a)&&P.length>1&&(t=!0),["release"].includes(a)&&(l=!0),i.push(null===e||void 0===e?void 0:e.name)}if(t)return y(!0),b({severity:"error",desc:"Please release MVO related mco's first and then others."}),void x(!1);if(l)return y(!0),b({severity:"error",desc:"Please un-select the released mco."}),void x(!1);const{valid:a,errDesc:r}=await(0,ae.d0)(i,e);if(a)await Q(),y(!0),b({severity:"success",desc:r});else if(Array.isArray(r)){let e=[];null===r||void 0===r||r.forEach(((t,l)=>{e.push((0,k.jsx)("li",{children:t},j().generate()))})),y(!0),b({severity:"error",desc:e})}else y(!0),b({severity:"error",desc:r});x(!1)})("auto-release"),disabled:!P.length||O&&("Release"===O[0].mcostate||"Implemented"===O[0].mcostate),style:{float:"right",marginRight:"15px"},children:"Auto Release"}),(0,k.jsx)(B.Z,{variant:"contained",onClick:()=>K("promote"),disabled:!P.length,style:{float:"right",marginRight:"15px"},children:"Mass Promote"}),(0,k.jsx)(B.Z,{variant:"contained",onClick:()=>K("demote"),disabled:!P.length,style:{float:"right",marginRight:"15px"},children:"Mass Demote"})]}),(0,k.jsx)(B.Z,{variant:"contained",onClick:()=>{(0,ae.jH)(v,"caMCO")},style:{float:"right",marginRight:"15px"},children:"Export"}),(0,k.jsx)(B.Z,{variant:"contained",disabled:!A,onClick:async()=>{if(A)try{const e=await q.getTaskList(Y.id);let t=null;if(Array.isArray(e)&&e.length>0?t=e[0].id:"string"===typeof e&&(t=e),t){const e=await q.taskApproval(t);null!==e&&void 0!==e&&e.success&&(y(!0),b({severity:"success",desc:" Task successfully approved!"})),await Q()}}catch(n){var e,t,l,i;console.error(" Task Approval Error",n),y(!0),b({severity:"error",desc:(null===n||void 0===n||null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t||null===(l=t.details)||void 0===l||null===(i=l.Response)||void 0===i?void 0:i.ErrorMessage)||"Approval failed"})}},style:{float:"right",marginRight:"15px"},children:"Validate"}),(0,k.jsx)(ne.Z,{component:"button",underline:"none",disabled:!(null!==P&&void 0!==P&&P.length),onClick:()=>{S(!0)},style:{float:"right",padding:"6px 40px 5px 10px",color:null!==P&&void 0!==P&&P.length?"#1976d2":"grey"},children:"Mass Update"})]}),(0,k.jsx)(E.ZP,{item:!0,md:12,sm:12,xs:12,children:(0,k.jsx)(D,{mcolistsArr:v||[],setSelected:M,selected:P,caRelatedEachMCODetails:l,selectedData:O,setSelectedData:R})})]}),C?(0,k.jsx)(le.Z,{openAlert:f,openDesc:C,setOpenAlert:y}):(0,k.jsx)(k.Fragment,{}),g?(0,k.jsx)("div",{style:{textAlign:"center"},children:(0,k.jsx)(te.Z,{show:g})}):(0,k.jsx)(k.Fragment,{}),(0,k.jsxs)(L.Z,{open:w,onClose:()=>{S(!1)},scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",maxWidth:"md",fullWidth:!0,children:[(0,k.jsx)(N.Z,{id:"scroll-dialog-title",children:"Mass update form"}),(0,k.jsx)(W.Z,{dividers:!0,children:(0,k.jsx)(U.Z,{id:"scroll-dialog-description",tabIndex:-1,children:(0,k.jsx)(ee,{ref:_,saveMassUpdateFormDetails:async e=>{const t={...r,[null===e||void 0===e?void 0:e.PropertyFieldName]:null===e||void 0===e?void 0:e.PropertyFieldValue};o((0,se.$V)({massUpdateChanges:t})),S(!1)}})})}),(0,k.jsxs)($.Z,{children:[(0,k.jsx)(B.Z,{onClick:()=>{S(!1)},children:"Cancel"}),(0,k.jsx)(B.Z,{onClick:()=>{_.current.callsubmitForm()},children:"Save"})]})]})]})]})})}}}]);
//# sourceMappingURL=429.b8c2d693.chunk.js.map